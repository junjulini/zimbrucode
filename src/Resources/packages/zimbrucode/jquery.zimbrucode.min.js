(()=>{"use strict";const t=jQuery;class e{constructor(){this.id=`zc-popup-${zc.uniqueID()}`}add(e){const i={title:"PopUp Title",jsonRequest:{},error:t=>{console.error("ZimbruCode : PopUp")},before:()=>{},success:t=>{},afterShowContent:()=>{},width:"",height:"",html:"",class:""},n=t.extend({},i,e),o=zc.tpl(' <div id="{{id}}" class="zc-popup {{class}}"> <div class="zc-popup__window"> <header class="zc-popup__header"> <span class="zc-popup__title">{{title}}</span> <i class="zc-popup__close zc-icon-clear"></i> </header> <div class="zc-scrollbar zc-popup__overflow-hidden"> <div class="zc-popup__loading"> <div class="zc-loading-spinner zc-popup__loading-spinner"> <div class="zc-loading-spinner__bounce zc-loading-spinner__bounce_mode_1"></div> <div class="zc-loading-spinner__bounce zc-loading-spinner__bounce_mode_2"></div> <div class="zc-loading-spinner__bounce zc-loading-spinner__bounce_mode_3"></div> </div> </div> <div class="zc-popup__content"></div> </div> </div> </div>',{id:this.id,class:n.class,title:n.title});t("body").css("overflow","hidden"),t("body").append(o),void 0!==n.jsonRequest.action&&n.jsonRequest.action?(this.size(n.height,n.width),n.before(),this.hideContent(),zc.jsonRequest(n.jsonRequest.action,n.jsonRequest.nonce||"",n.jsonRequest.options||{}).then((t=>{void 0!==t.content&&this.appendContent(t.content),n.success(t),this.showContent(),n.afterShowContent(t)})).catch((t=>{n.error(t)}))):(this.size(n.height,n.width),this.appendContent(n.html),this.showContent(),n.success(n.html)),t(`#${this.id}`).on("click",".zc-popup__close",(t=>{t.preventDefault(),this.close()})),t(document).on("mousedown touchstart",`#${this.id}`,(e=>{const i=t(".zc-popup__window");i.is(e.target)||0!==i.has(e.target).length||this.close()}))}size(e,i){e=!(void 0===e&&!e)&&e,i=!(void 0===i&&!i)&&i;const n=()=>{navigator.userAgent.match(/Trident.*rv\:11\./)?(i&&t(`#${this.id} .zc-popup__window`).css({"max-width":`${i}px`,width:"100%"}),e&&t(`#${this.id} .zc-popup__window`).css({"max-height":`${e}px`,height:"100%"})):(i&&t(`#${this.id} .zc-popup__window`).css({"max-width":`${i}px`}),e&&t(`#${this.id} .zc-popup__window`).css({"max-height":`${e}px`}))};n(),t(window).resize((()=>{n()}))}hideContent(){t(`#${this.id} .zc-popup__content`).hide(),this.showLoading()}showContent(){this.hideLoading(),t(`#${this.id} .zc-popup__window .zc-scrollbar`).removeClass("zc-popup__overflow-hidden"),t(`#${this.id} .zc-popup__content`).show()}hideLoading(){t(`#${this.id} .zc-popup__loading`).hide()}showLoading(){t(`#${this.id} .zc-popup__loading`).show()}remContent(){t(`#${this.id} .zc-popup__content`).empty()}appendContent(e){t(`#${this.id} .zc-popup__content`).append(e)}close(){t(`#${this.id} .zc-popup__window`).addClass("zc-popup__window_close"),t(`#${this.id} .zc-popup__window`).one("animationend webkitAnimationEnd oAnimationEnd MSAnimationEnd",(e=>{t(`#${this.id} `).hide().remove(),t("body").css("overflow","initial")}))}}class i{constructor(){this.defaults={}}__extend(...t){let e=0,i={};for(;e<t.length;e++){let n=t[e];for(let t in n)i[t]=n[t]}return i}__api(t,e,i){let n,o=()=>{};if(arguments.length>1){if("number"==typeof(i=this.__extend({path:"/"},this.defaults,i)).expires){const t=new Date;t.setMilliseconds(t.getMilliseconds()+864e5*i.expires),i.expires=t}try{n=zc.parse(e,!0),/^[\{\[]/.test(n)&&(e=n)}catch(t){}return e=o.write?o.write(e,t):encodeURIComponent(String(e)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=(t=(t=encodeURIComponent(String(t))).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent)).replace(/[\(\)]/g,escape),document.cookie=[t,"=",e,i.expires&&"; expires="+i.expires.toUTCString(),i.path&&"; path="+i.path,i.domain&&"; domain="+i.domain,i.secure?"; secure":""].join("")}t||(n={});let s=document.cookie?document.cookie.split("; "):[],r=/(%[0-9A-Z]{2})+/g,c=0;for(;c<s.length;c++){let e=s[c].split("="),i=e[0].replace(r,decodeURIComponent),a=e.slice(1).join("=");'"'===a.charAt(0)&&(a=a.slice(1,-1));try{if(a=o.read?o.read(a,i):a.replace(r,decodeURIComponent),this.json)try{a=JSON.parse(a)}catch(t){}if(t===i){n=a;break}t||(n[i]=a)}catch(t){}}return n}add(t,e,i){this.__api(t,e,i)}get(t){return this.__api(t)}remove(t,e){this.__api(t,"",this.__extend(e,{expires:-1}))}getJSON(){return this.__api.apply({json:!0},[].slice.call(arguments))}}const n=jQuery;class o{constructor(t,e){this.restURL=t,this.restNonce=e}get(t,e={}){return this.__ajax("GET",t,e)}create(t,e={}){return this.__ajax("POST",t,e)}update(t,e={}){return this.__ajax("PUT",t,e)}delete(t){return this.__ajax("DELETE",t)}query(t){return this.restURL+t}__ajax(t="GET",e,i={}){const o={},s={url:this.restURL+e,dataType:"json",method:t,data:i,headers:{"X-WP-Nonce":this.restNonce}};"POST"!=t&&"PUT"!=t||(s.processData=!1,s.data=JSON.stringify(i),s.contentType="application/json; charset=UTF-8"),s.error=(t,e)=>{n.isFunction(o.fail)&&o.fail.call(this,t,e)},s.success=(t,e,i)=>{n.isFunction(o.done)&&o.done.call(this,t,e,i)};const r=zc.ajax(s);return r.fail=t=>(o.fail=t,r),r.done=t=>(o.done=t,r),r}}const s=jQuery;window.zc=new class{constructor(){this.module={},this.moduleData={},this.global={},this.cookie=new i}addModule(t,e){this.initModuleData(t),this.module[t]=e(s)}initModuleData(t){this.moduleData[t]={}}addModuleData(t,e={}){this.moduleData[t]=e}getModuleData(t){return this.moduleData[t]}uniqueID(){return Math.floor(26*Math.random())+Date.now()}strReplace(t,e,i){let n="";return t.forEach(((e,i)=>{t.length-1==i?n+=e:n+=`${e}|`})),i.replace(new RegExp(n,"g"),(i=>{let n="";return t.forEach(((t,o)=>{if(t==i)return s.isFunction(e[o])?(n=e[o](i),!1):(n=e[o],!1)})),n}))}tpl(t="",e={}){if("string"==typeof t&&"object"==typeof e){let i=[],n=[];return s.each(e,((t,e)=>{i.push(`{{${t}}}`),n.push(e)})),this.strReplace(i,n,t)}return!1}deepFindAndSetting(t,e,i,n=!1){let o=e.split("/"),s=t;if(!1===n){if(void 0===i)return o.forEach((t=>{void 0!==s&&void 0!==s[t]&&(s=s[t])})),s;for(let t in o)o.length-1==t?s[o[t]]=i:void 0===s||void 0===s[o[t]]?(s[o[t]]={},s=s[o[t]]):s=s[o[t]]}else for(let t in o){if(void 0===s||void 0===s[o[t]])return;o.length-1==t?delete s[o[t]]:s=s[o[t]]}}isMobile(){return!!/iP(od|hone|ad)/i.test(window.navigator.userAgent)||!(!/Android/i.test(window.navigator.userAgent)||!/Mobile/i.test(window.navigator.userAgent))||!!/IEMobile/i.test(window.navigator.userAgent)||!!/Windows Phone/i.test(window.navigator.userAgent)||!!/BlackBerry/i.test(window.navigator.userAgent)||!!/BB10/i.test(window.navigator.userAgent)||"Microsoft Internet Explorer"===window.navigator.appName&&document.documentMode>=8}round(t,e){return void 0===e||0==+e?Math.round(t):(t=+t,e=+e,isNaN(t)||"number"!=typeof e||e%1!=0?NaN:(t=t.toString().split("e"),+((t=(t=Math.round(+(t[0]+"e"+(t[1]?+t[1]+e:e)))).toString().split("e"))[0]+"e"+(t[1]?+t[1]-e:-e))))}resize(t,e){let i=window.innerWidth,n=window.innerHeight;s(window).resize((()=>{window.innerWidth!=i&&(i=window.innerWidth,s.isFunction(t)&&t(i)),window.innerHeight!=n&&(n=window.innerHeight,s.isFunction(e)&&e(n))}))}clone(t){return s.extend(!0,{},t)}randomCode(t){let e="";for(let i=0;i<t;i++){let t=Math.floor(62*Math.random());e+="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890".charAt(t)}return e}parse(t,e){return void 0===e?JSON.parse(t):JSON.stringify(t)}isJson(t){try{JSON.parse(t)}catch(t){return!1}return!0}strstr(t,e,i){const n=t.indexOf(e);return-1!=n&&(i?t.substr(0,n):t.slice(n))}ucfirst(t,e){return(t=e?t.toLowerCase():t||"").replace(/(\b)([a-zA-Z])/,(t=>t.toUpperCase()))}addQueryString(t={},e){e||(e=window.location.href);const i=(t,e,i)=>{const n=new RegExp("([?&])"+t+"=.*?(&|#|$)(.*)","gi");let o;if(n.test(i))return null!=e?i.replace(n,"$1"+t+"="+e+"$2$3"):(o=i.split("#"),i=o[0].replace(n,"$1$3").replace(/(&|\?)$/,""),void 0!==o[1]&&null!==o[1]&&(i+="#"+o[1]),i);if(null!=e){const n=-1!==i.indexOf("?")?"&":"?";return o=i.split("#"),i=o[0]+n+t+"="+e,void 0!==o[1]&&null!==o[1]&&(i+="#"+o[1]),i}return i};return s.each(t,((t,n)=>{e=i(t,n,e)})),e}removeQueryString(t=[],e){const i=(t,e)=>{let i,n=e.split("?")[0],o=[],s=-1!==e.indexOf("?")?e.split("?")[1]:"";if(""!==s){o=s.split("&");for(let e=o.length-1;e>=0;e-=1)i=o[e].split("=")[0],i===t&&o.splice(e,1);n=n+"?"+o.join("&")}return n};return s.each(t,((t,n)=>{e=i(n,e)})),e}popup(){return new e}confirm(t){const e=this.popup(),i={subject:"test",ok:()=>{e.close()},cancel:()=>{e.close()},title:"Confirm",titleOK:"OK",titleCancel:"Cancel",html:"",width:300,height:200,class:""};let n=s.extend({},i,t),o="";o=n.html?n.html:this.tpl(' <div class="zc-confirm"> <div class="zc-confirm__container"> <p class="zc-confirm__text">{{subject}}</p> </div> <footer class="zc-confirm__footer"> <button class="zc-confirm__button zc-confirm__button_type_ok zc-confirm__button_active" type="button">{{title_ok}}</button> <button class="zc-confirm__button zc-confirm__button_type_cancel" type="button">{{title_cancel}}</button> </footer> </div>',{subject:n.subject,title_ok:n.titleOK,title_cancel:n.titleCancel}),e.add({title:n.title,html:o,width:n.width,height:n.height,class:`zc-popup_no-padding zc-popup_type_confirm ${n.class}`,success:()=>{s(".zc-confirm").on("click",".zc-confirm__button_type_ok",(t=>{t.preventDefault(),n.ok(e)})),s(".zc-confirm").on("click",".zc-confirm__button_type_cancel",(t=>{t.preventDefault(),n.cancel(e)}))}})}prompt(t){const e=this.popup(),i={subject:"test",placeholder:"Insert your text",default:"",ok:()=>{e.close()},cancel:()=>{e.close()},title:"Prompt",titleOK:"OK",titleCancel:"Cancel",html:"",width:400,height:200,class:""};let n=s.extend({},i,t),o="";o=n.html?n.html:this.tpl(' <div class="zc-prompt"> <div class="zc-prompt__container"> <p class="zc-prompt__text">{{subject}}</p> <input placeholder="{{placeholder}}" value="{{default}}" class="zc-prompt__input"> </div> <footer class="zc-prompt__footer"> <button class="zc-prompt__button zc-prompt__button_type_ok zc-prompt__button_active" type="button">{{title_ok}}</button> <button class="zc-prompt__button zc-prompt__button_type_cancel" type="button">{{title_cancel}}</button> </footer> </div>',{subject:n.subject,placeholder:n.placeholder,default:n.default,title_ok:n.titleOK,title_cancel:n.titleCancel}),e.add({title:n.title,html:o,width:n.width,height:n.height,class:`zc-popup_type_prompt ${n.class}`,success:()=>{s(".zc-prompt").on("click",".zc-prompt__button_type_ok",(t=>{t.preventDefault();let i=s(".zc-prompt__input").val();i?n.ok(e,i):s(".zc-prompt__input").focus()})),s(".zc-prompt").on("click",".zc-prompt__button_type_cancel",(t=>{t.preventDefault(),n.cancel(e)}))}})}alert(t){const e=this.popup(),i={subject:"test",ok:()=>{e.close()},title:"Alert",titleOK:"OK",html:"",width:300,height:200,class:""};let n=s.extend({},i,t),o="";o=n.html?n.html:this.tpl(' <div class="zc-alert"> <div class="zc-alert__container"> <p class="zc-alert__text">{{subject}}</p> </div> <footer class="zc-alert__footer"> <div class="zc-alert__center"> <button class="zc-alert__button zc-alert__button_type_ok zc-alert__button_active" type="button">{{title_ok}}</button> </div> </footer></div> ',{subject:n.subject,title_ok:n.titleOK}),e.add({title:n.title,html:o,width:n.width,height:n.height,class:`zc-popup_type_alert ${n.class}`,success:()=>{s(".zc-alert").on("click",".zc-alert__button_type_ok",(t=>{t.preventDefault(),n.ok(e)}))}})}inputRange(t,e={}){if(t&&void 0!==e.el){const i={},n=e.containerLBClass||"";i.hasLB=e.el.parent().hasClass(n),i.currentValue=e.el.val();const o=e.settings.min||0,r=e.settings.max||100;i.trackPercent=100*(i.currentValue-o)/(r-o),i.postfix=e.settings.postfix||"";const c=e.leftIndicatorClass||"",a=e.currentIndicatorClass||"",l=e.rightIndicatorClass||"",d=e.gridContainerClass||"";switch(i.leftIndicator=c?e.el.parent().find(`.${c}`):"",i.currentIndicator=a?e.el.parent().find(`.${a}`):"",i.rightIndicator=l?e.el.parent().find(`.${l}`):"",i.gridContainer=d?e.el.parent().find(`.${d}`):"",i.addTrackPercent=()=>{i.hasLB||e.el.css("background-size",`${i.trackPercent}% 100%`)},i.indicatorCurrent=(t=!1)=>{if(!0!==(e.settings.hide_from_to||!1)){const e=i.hasLB?17:16;!0===t&&i.currentIndicator.text(i.currentValue+i.postfix);let n="left";s("body").hasClass("rtl")&&(n="right");const o=i.currentIndicator.outerWidth()||0,r=`${n}: calc(${i.trackPercent}% - ${(o-e)/2+i.trackPercent/100*e}px)`;i.currentIndicator.attr("style",r)}},i.indicatorsShowHide=()=>{if(!0!==(e.settings.hide_min_max||!1)&&void 0!==i.currentIndicator){const t=i.leftIndicator.get(0).getBoundingClientRect(),e=i.currentIndicator.get(0).getBoundingClientRect(),n=i.rightIndicator.get(0).getBoundingClientRect();s("body").hasClass("rtl")?(n.right-1>e.left?i.rightIndicator.css("visibility","hidden"):i.rightIndicator.css("visibility","visible"),t.left+1<e.right?i.leftIndicator.css("visibility","hidden"):i.leftIndicator.css("visibility","visible")):(t.right+1>e.left?i.leftIndicator.css("visibility","hidden"):i.leftIndicator.css("visibility","visible"),n.left-1<e.right?i.rightIndicator.css("visibility","hidden"):i.rightIndicator.css("visibility","visible"))}},i.countDecimals=t=>t%1!=0?t.toString().split(".")[1].length:0,i.initMode=()=>{i.indicatorCurrent(),i.indicatorsShowHide()},i.liveMode=()=>{i.addTrackPercent(),i.indicatorCurrent(!0),i.indicatorsShowHide()},i.changeMode=()=>{const t=e.settings.hide_min_max||!1,n=e.settings.grid||!1,s=e.settings.step||1;if(e.el.attr("min",o),e.el.attr("max",r),e.el.data("settings",e.settings),!1===t&&(i.leftIndicator.text(o+i.postfix),i.rightIndicator.text(r+i.postfix)),!0===n){var c=(r-o)/4;i.gridContainer.find("li[data-n=1] > span").text(o),i.gridContainer.find("li[data-n=2] > span").text(zc.round(c+o,i.countDecimals(s))),i.gridContainer.find("li[data-n=3] > span").text(zc.round(2*c+o,i.countDecimals(s))),i.gridContainer.find("li[data-n=4] > span").text(zc.round(3*c+o,i.countDecimals(s))),i.gridContainer.find("li[data-n=5] > span").text(r)}i.addTrackPercent(),i.indicatorCurrent(!0),i.indicatorsShowHide()},t){case"init":i.initMode();break;case"live":i.liveMode();break;case"change":i.changeMode()}}}restAPI(t,e){return new o(t,e)}event(t,e){const i=new URL(t);void 0!==e.data&&s.each(e.data,((t,e)=>{i.searchParams.append(t,e)}));const n=new window.EventSource(i.href);void 0!==e.listener&&(s.isFunction(e.listener)?n.addEventListener("message",(t=>{const i=JSON.parse(t.data);e.listener(i,n)})):"object"==typeof e.listener&&s.each(e.listener,((t,e)=>{n.addEventListener(t,(t=>{const i=JSON.parse(t.data);e(i,n)}))}))),void 0!==e.error&&(n.onerror=t=>{e.error(t,n)})}async jsonRequest(t,e="",i={}){const n=new URL(ajaxurl,s(location).attr("origin"));n.searchParams.append("action",t),e&&n.searchParams.append("_wpnonce",e);const o=async(t,e)=>{try{const e=await fetch(n.href,{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json","Cache-Control":"no-cache"},body:JSON.stringify(t)});if(!e.ok)throw`Error - ${e.status} : ${e.statusText}`;return e.json()}catch(i){if(e<=1)throw i;return await(1e3,new Promise((t=>setTimeout(t,1e3)))),o(t,e-1)}};return await o(i,4)}ajax(t){const e={method:"post",url:ajaxurl,data:"",before:()=>{},error:()=>{console.warn("ZimbruCode : Ajax Error")},success:t=>{}};let i=1;settings=s.extend({},e,t);const n=this.clone(settings);return s.isFunction(settings.before)&&(n.beforeSend=settings.before,delete n.before),n.success=(t,e,i)=>{t<0?s.isFunction(settings.error)&&settings.error(i,e):s.isFunction(settings.success)&&settings.success(t,e,i)},n.error=(t,e)=>{i<=4?setTimeout((()=>{i++,s.ajax(n)}),1e3):s.isFunction(settings.error)&&settings.error(t,e)},s.ajax(n)}}})();