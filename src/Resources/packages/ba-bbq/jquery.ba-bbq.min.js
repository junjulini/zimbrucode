/*
 * jQuery BBQ: Back Button & Query Library - v1.2.1 - 2/17/2010 (Modificated version - ZC : 4/12/2018)
 * http://benalman.com/projects/jquery-bbq-plugin/
 * 
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */
!function(e,n){"$:nomunge";var t,r,o,a,i,c,u,f,s=Array.prototype.slice,l=decodeURIComponent,p=e.param,h=e.bbq=e.bbq||{},d=e.event.special,g="hashchange",m="querystring",v="fragment",y="elemUrlAttr",$="location",b="href",x="src",A=/^.*\?|#.*$/g,j=/^.*\#/,N={};function S(e){return"string"==typeof e}function w(e){var n=s.call(arguments,1);return function(){return e.apply(this,n.concat(s.call(arguments)))}}function E(r,a,i,c,u){var s,h,d,g,y;return c!==t?(y=(d=i.match(r?/^([^#]*)\#?(.*)$/:/^([^#?]*)\??([^#]*)(#?.*)/))[3]||"",2===u&&S(c)?h=c.replace(r?j:A,""):(g=o(d[2]),c=S(c)?o[r?v:m](c):c,h=2===u?c:1===u?e.extend({},c,g):e.extend({},g,c),h=p(h),r&&(h=h.replace(f,l))),s=d[1]+(r?"#":h||!d[1]?"?":"")+h+y):s=a(i!==t?i:n[$][b]),s}function q(e,n,r){return n===t||"boolean"==typeof n?(r=n,n=p[e?v:m]()):n=S(n)?n.replace(e?j:A,""):n,o(n,r)}function C(n,r,o,a){return S(o)||"object"==typeof o||(a=o,o=r,r=t),this.each(function(){var t=e(this),i=r||u()[(this.nodeName||"").toLowerCase()]||"",c=i&&t.attr(i)||"";t.attr(i,p[n](c,o,a))})}p[m]=w(E,0,function(e){return e.replace(/(?:^[^?#]*\?([^#]*).*$)?.*/,"$1")}),p[v]=r=w(E,1,function(e){return e.replace(/^[^#]*#?(.*)$/,"$1")}),r.noEscape=function(n){n=n||"";var t=e.map(n.split(""),encodeURIComponent);f=new RegExp(t.join("|"),"g")},r.noEscape(",/"),e.deparam=o=function(n,r){var o={},a={true:!0,false:!1,null:null};return e.each(n.replace(/\+/g," ").split("&"),function(n,i){var c,u=i.split("="),f=l(u[0]),s=o,p=0,h=f.split("]["),d=h.length-1;if(/\[/.test(h[0])&&/\]$/.test(h[d])?(h[d]=h[d].replace(/\]$/,""),d=(h=h.shift().split("[").concat(h)).length-1):d=0,2===u.length)if(c=l(u[1]),r&&(c=c&&!isNaN(c)?+c:"undefined"===c?t:a[c]!==t?a[c]:c),d)for(;p<=d;p++)s=s[f=""===h[p]?s.length:h[p]]=p<d?s[f]||(h[p+1]&&isNaN(h[p+1])?{}:[]):c;else e.isArray(o[f])?o[f].push(c):o[f]!==t?o[f]=[o[f],c]:o[f]=c;else f&&(o[f]=r?t:"")}),o},o[m]=w(q,0),o[v]=a=w(q,1),e[y]||(e[y]=function(n){return e.extend(N,n)})({a:b,base:b,iframe:x,img:x,input:x,form:"action",link:b,script:x}),u=e[y],e.fn[m]=w(C,m),e.fn[v]=w(C,v),h.pushState=i=function(e,o){S(e)&&/^#/.test(e)&&o===t&&(o=2);var a=e!==t,i=r(n[$][b],a?e:{},a?o:2);n[$][b]=i+(/#/.test(i)?"":"#")},h.getState=c=function(e,n){return e===t||"boolean"==typeof e?a(e):a(n)[e]},h.removeState=function(n){var r={};n!==t&&(r=c(),e.each(e.isArray(n)?n:arguments,function(e,n){delete r[n]})),i(r,2)},d[g]=e.extend(d[g],{add:function(n){var a;function i(e){var n=e[v]=r();e.getState=function(e,r){return e===t||"boolean"==typeof e?o(n,e):o(n,r)[e]},a.apply(this,arguments)}if(e.isFunction(n))return a=n,i;a=n.handler,n.handler=i}})}(jQuery,this),function(e,n,t){"$:nomunge";var r,o=e.event.special,a="location",i="hashchange",c="href",u=n.navigator.userAgent.indexOf("MSIE "),f=document.documentMode,s=u>0&&(void 0===f||f<8),l="on"+i in n&&!s;function p(e){return(e=e||n[a][c]).replace(/^[^#]*#?(.*)$/,"$1")}e[i+"Delay"]=100,o[i]=e.extend(o[i],{setup:function(){if(l)return!1;e(r.start)},teardown:function(){if(l)return!1;e(r.stop)}}),r=function(){var t,r,o,u,f={};return f.start=function(){if(!t){var f=p();o||(o=u=function(e){return e},s&&(r=e('<iframe src="javascript:0"/>').hide().insertAfter("body")[0].contentWindow,u=function(){return p(r.document[a][c])},(o=function(e,n){if(e!==n){var t=r.document;t.open().close(),t[a].hash="#"+e}})(p()))),function r(){var s=p(),l=u(f);s!==f?(o(f=s,l),e(n).trigger(i)):l!==f&&(n[a][c]=n[a][c].replace(/#.*/,"")+"#"+l),t=setTimeout(r,e[i+"Delay"])}()}},f.stop=function(){r||(t&&clearTimeout(t),t=0)},f}()}(jQuery,this);