"use strict";zc.module.panel.setControl(function(l,t,n){var i={frame:"",parseData:function(t){var n;t&&void 0!==t&&(n=[],console.log(t),t.find(".zc-panel-control-gallery-type__item").each(function(t,e){var a=l(this).data("id");a&&void 0!==a&&n.push(a)}),n&&t.find("input[type=hidden]").val(zc.parse(n,!0)).change())},makeSortable:function(){l(".zc-panel-control-gallery-type__list").sortable({opacity:.6,revert:300,stop:function(t,e){i.parseData(l(this).parent())}})}};i.makeSortable(),l(".zc-panel").on("click",".zc-panel-control-gallery-type__button",function(t){t.preventDefault();var e=l(this);i.frame&&i.frame.close(),i.frame=wp.media.frames.frame=wp.media({title:n["window-title-1"],button:{text:n["window-text-1"]},library:{type:"image"},multiple:"add"}),i.frame.on("select",function(){var t=i.frame.state().get("selection").toJSON(),a=e.parent().find(".zc-panel-control-gallery-type__list");t&&l.isArray(t)&&l.when(l.each(t,function(t,e){a.append('<li class="zc-panel-control-gallery-type__item" data-id="'+e.id+'">                            <img src="'+e.sizes.thumbnail.url+'" width="80" height="80" class="zc-panel-control-gallery-type__image-preview">                            <button title="'+n["button-title-1"]+'" class="zc-panel-control-gallery-type__item-button zc-panel-control-gallery-type__item-button_change-image">                                <i class="zc-panel-control-gallery-type__item-button-icon zc-icon-brush"></i>                            </button>                            <button title="'+n["button-title-2"]+'" class="zc-panel-control-gallery-type__item-button zc-panel-control-gallery-type__item-button_remove-image">                                <i class="zc-panel-control-gallery-type__item-button-icon zc-icon-close"></i>                            </button>                        </li>')})).then(function(){i.parseData(e.parent())})}),i.makeSortable(),i.frame.open()}),l(".zc-panel").on("click",".zc-panel-control-gallery-type__item-button_change-image",function(t){t.preventDefault();var e=l(this),a=l(this).parent().parent().parent();i.frame&&i.frame.close(),i.frame=wp.media.frames.frame=wp.media({title:n["window-title-2"],button:{text:n["window-text-2"]},library:{type:"image"},multiple:!1}),i.frame.on("select",function(){var t=i.frame.state().get("selection").first().toJSON();e.parent().data("id",t.id),e.parent().find(".zc-panel-control-gallery-type__image-preview").attr("src",t.sizes.thumbnail.url),i.parseData(a)}),i.frame.open()}),l(".zc-panel").on("click",".zc-panel-control-gallery-type__item-button_remove-image",function(t){t.preventDefault();var e=l(this).parent().parent().parent();l(this).parent().animate({opacity:0},200,function(){l(this).remove(),i.parseData(e)})})});