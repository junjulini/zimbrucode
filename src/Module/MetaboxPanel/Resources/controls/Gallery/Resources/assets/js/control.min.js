(()=>{"use strict";zc.module.panel.addControl(((t,e,a)=>{const n={frame:""};n.parseData=e=>{if(e&&void 0!==e){const a=[];e.find(".zc-panel-control-gallery-type__item").each((function(e,n){const l=t(this).data("id");l&&void 0!==l&&a.push(l)})),a&&e.find("input[type=hidden]").val(zc.parse(a,!0)).change()}},n.makeSortable=()=>{t(".zc-panel-control-gallery-type__list").sortable({opacity:.6,revert:300,stop:function(e,a){n.parseData(t(this).parent())}})},n.makeSortable(),t(".zc-panel").on("click",".zc-panel-control-gallery-type__button",(function(e){e.preventDefault();const l=t(this);n.frame&&n.frame.close(),n.frame=wp.media({title:a["window-title-1"],button:{text:a["window-text-1"]},library:{type:"image"},multiple:"add"}),n.frame.on("select",(()=>{const e=n.frame.state().get("selection").toJSON(),i=l.parent().find(".zc-panel-control-gallery-type__list");e&&t.isArray(e)&&t.when(t.each(e,((t,e)=>{"image"==e.type&&i.append(`<li class="zc-panel-control-gallery-type__item" data-id="${e.id}">\n                                <img src="${e.sizes.thumbnail.url}" width="80" height="80" class="zc-panel-control-gallery-type__image-preview">\n                                <button title="${a["button-title-1"]}" class="zc-panel-control-gallery-type__item-button zc-panel-control-gallery-type__item-button_change-image">\n                                    <i class="zc-panel-control-gallery-type__item-button-icon zc-icon-brush"></i>\n                                </button>\n                                <button title="${a["button-title-2"]}" class="zc-panel-control-gallery-type__item-button zc-panel-control-gallery-type__item-button_remove-image">\n                                    <i class="zc-panel-control-gallery-type__item-button-icon zc-icon-close"></i>\n                                </button>\n                            </li>`)}))).then((()=>{n.parseData(l.parent())}))})),n.makeSortable(),n.frame.open()})),t(".zc-panel").on("click",".zc-panel-control-gallery-type__item-button_change-image",(function(e){e.preventDefault();const l=t(this),i=t(this).parent().parent().parent();n.frame&&n.frame.close(),n.frame=wp.media({title:a["window-title-2"],button:{text:a["window-text-2"]},library:{type:"image"},multiple:!1}),n.frame.on("select",(()=>{const t=n.frame.state().get("selection").first().toJSON();"image"==t.type&&(l.parent().data("id",t.id),l.parent().find(".zc-panel-control-gallery-type__image-preview").attr("src",t.sizes.thumbnail.url),n.parseData(i))})),n.frame.open()})),t(".zc-panel").on("click",".zc-panel-control-gallery-type__item-button_remove-image",(function(e){e.preventDefault();const a=t(this).parent().parent().parent();t(this).parent().animate({opacity:0},200,(function(){t(this).remove(),n.parseData(a)}))}))}))})();