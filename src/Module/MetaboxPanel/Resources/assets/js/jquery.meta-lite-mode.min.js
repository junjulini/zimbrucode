(()=>{"use strict";const e=jQuery;class t{constructor(){this.global=zc.getModuleData("panel")}scrollbarTop(){e(".zc-panel .zc-scrollbar").scrollTop(0)}calcHeight(){this.getCache("wp-body-height")!==e(window).height()&&this.addCache("wp-body-height",e(window).height())}eraseMobileMenu(){this.isDesktopMode()?!0===this.service("menu/isSubmenuItem")&&(e(".zc-panel-menu").addClass("zc-panel-menu_submenu-active"),e(".zc-panel-content").addClass("zc-panel-content_submenu-active")):(e(".zc-panel-menu").removeClass("zc-panel-menu_submenu-active"),e(".zc-panel-content").removeClass("zc-panel-content_submenu-active")),e(".zc-panel-content").removeClass("zc-panel-content_mobile-menu-visible"),e(".zc-panel-header__controller-button_type_mobile-menu").removeClass("zc-panel-header__controller-button_type_mobile-menu_active"),this.service("close-block").hideDefinitely()}isDesktopMode(){return e(".zc-panel").width()>=this.getConfig("min-size/mode2")}errorCheck(t,n){e(".zc-popup").hasClass("zc-panel-error-confirm")||(e(".zc-popup").length&&e(".zc-popup").remove(),console.error(n),zc.confirm({title:t,subject:`${n} <br> Page will be reloaded, ok?`,class:"zc-panel-error-confirm",ok:()=>{location.reload()}}))}getVar(e,t){const n=zc.deepFindAndSetting(this.global.vars,e);return void 0!==n?n:t}addVar(e,t){zc.deepFindAndSetting(this.global.vars,e,t)}addCache(e,t){zc.deepFindAndSetting(this.global.cache,e,t)}getCache(e,t){const n=zc.deepFindAndSetting(this.global.cache,e);return void 0!==n?n:t}remCache(e){zc.deepFindAndSetting(this.global.cache,e,!1,!0)}addConfig(e,t){zc.deepFindAndSetting(this.global.config,e,t)}getConfig(e,t){const n=zc.deepFindAndSetting(this.global.config,e);return void 0!==n?n:t}service(t,n){if(void 0!==t&&"string"==typeof t){if(!e.isFunction(n)&&"object"!=typeof n){const e=this.getCache(`services/${t}`,!1);if(void 0!==e)return e;throw new Error(`Next service not exist : ${t}`)}this.addCache(`services/${t}`,n)}}on(t,n,i,c=!1){e(".zc-panel").on(t,n,(t=>{!0===c&&t.preventDefault(),i(e(t.currentTarget),t)}))}click(e,t,n=!0){this.on("click",e,t,n)}}const n=jQuery;class i extends t{constructor(){super();let e=n(".zc-panel.zc-panel_mode_meta-lite").width();if(e>0)this.checkPanelWidth();else{let t=setInterval((()=>{e=n(".zc-panel.zc-panel_mode_meta-lite").width(),e>0&&(clearInterval(t),this.checkPanelWidth())}),100)}}addModeSize(e){let t="mode-1-";t=this.getConfig("min-size/mode1")>=e?"mode-1-":this.getConfig("min-size/mode2")>=e?"mode-2-":"mode-3-",n(".zc-panel.zc-panel_mode_meta-lite").attr("data-width",t+e),n(window).trigger("zc/panel/size-changed")}checkPanelWidth(){new ResizeObserver((e=>{void 0!==e[0]&&this.addModeSize(e[0].contentRect.width)})).observe(n(".zc-panel.zc-panel_mode_meta-lite").get(0))}}zc.module.panel.addMode(((e,t)=>{t.controlInit(),t.controlHelp(),t.condition(),t.tooltip(),new i;const n=e(".zc-panel.zc-panel_mode_meta-lite .zc-panel-controls__section");t.addCache("menu/current-section",n),e(window).trigger("zc/panel/menu/item-change-ICP",[n]),e(".zc-panel-template__panel-loading").hide(),e(".zc-panel.zc-panel_mode_meta-lite").css("visibility","visible"),t.disableSaveButton=()=>{},t.enableSaveButton=()=>{},t.disableResetButton=()=>{},t.enableResetButton=()=>{}}))})();