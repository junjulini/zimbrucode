(()=>{"use strict";const e=jQuery;class t{constructor(){this.global=zc.getModuleData("panel")}scrollbarTop(){e(".zc-panel .zc-scrollbar").scrollTop(0)}calcHeight(){this.getCache("wp-body-height")!==e(window).height()&&this.addCache("wp-body-height",e(window).height())}eraseMobileMenu(){this.isDesktopMode()?!0===this.service("menu/isSubmenuItem")&&(e(".zc-panel-menu").addClass("zc-panel-menu_submenu-active"),e(".zc-panel-content").addClass("zc-panel-content_submenu-active")):(e(".zc-panel-menu").removeClass("zc-panel-menu_submenu-active"),e(".zc-panel-content").removeClass("zc-panel-content_submenu-active")),e(".zc-panel-content").removeClass("zc-panel-content_mobile-menu-visible"),e(".zc-panel-header__controller-button_type_mobile-menu").removeClass("zc-panel-header__controller-button_type_mobile-menu_active"),this.service("close-block").hideDefinitely()}isDesktopMode(){return e(".zc-panel").width()>=this.getConfig("min-size/mode2")}errorCheck(t,n){e(".zc-popup").hasClass("zc-panel-error-confirm")||(e(".zc-popup").length&&e(".zc-popup").remove(),console.error(t),zc.confirm({title:`Error - ${n.statusText} : ${n.status}`,subject:`${t} Page will be reloaded, ok?`,class:"zc-panel-error-confirm",ok:()=>{location.reload()}}))}getVar(e,t){const n=zc.deepFindAndSetting(this.global.vars,e);return void 0!==n?n:t}addVar(e,t){zc.deepFindAndSetting(this.global.vars,e,t)}addCache(e,t){zc.deepFindAndSetting(this.global.cache,e,t)}getCache(e,t){const n=zc.deepFindAndSetting(this.global.cache,e);return void 0!==n?n:t}remCache(e){zc.deepFindAndSetting(this.global.cache,e,!1,!0)}addConfig(e,t){zc.deepFindAndSetting(this.global.config,e,t)}getConfig(e,t){const n=zc.deepFindAndSetting(this.global.config,e);return void 0!==n?n:t}service(t,n){if(void 0!==t&&"string"==typeof t){if(!e.isFunction(n)&&"object"!=typeof n){const e=this.getCache(`services/${t}`,!1);if(void 0!==e)return e;throw new Error(`Next service not exist : ${t}`)}this.addCache(`services/${t}`,n)}}on(t,n,i,a=!1){e(".zc-panel").on(t,n,(t=>{!0===a&&t.preventDefault(),i.call(this,e(t.currentTarget),t)}))}click(e,t,n=!0){this.on("click",e,t,n)}}const n=jQuery;class i extends t{constructor(){super(),this.isOpen=0,this.click(".zc-panel-controls__close-block",(()=>{n(window).trigger("zc/close-block")})),n(window).on("zc/close-block/show",(()=>{this.show()})),n(window).on("zc/close-block/hide",(()=>{this.hide()})),n(window).on("zc/close-block/hide-definitely",(()=>{this.hideDefinitely()}))}show(){n(".zc-panel-controls__close-block").addClass("zc-panel-controls__close-block_active"),this.isOpen++}hide(){1===this.isOpen?(n(".zc-panel-controls__close-block").removeClass("zc-panel-controls__close-block_active"),this.isOpen=0):(this.isOpen--,this.isOpen<0&&(this.isOpen=0))}hideDefinitely(){n(".zc-panel-controls__close-block").removeClass("zc-panel-controls__close-block_active"),this.isOpen=0,n(window).trigger("zc/close-block")}}const a=jQuery;class c{constructor(){this.callback={}}add(e,t,n){a.isFunction(t)&&(void 0===this.callback[e]&&(this.callback[e]=[]),this.callback[e].push({callback:t,additional:n}))}run(e){if(void 0!==e&&""!==e){const t=[].slice.apply(arguments);if(t.shift(),void 0!==this.callback[e])for(let n in this.callback[e]){const i=a.extend(!0,[],t);void 0!==this.callback[e][n].additional&&i.push(this.callback[e][n].additional),this.callback[e][n].callback.apply(this,i)}}}}const s=jQuery;class o extends t{constructor(){super(),this.isSubmenuItem=!1,this.menuItemID=!1,this.menuItem=!1,this.submenuItem=!1,this.menuParentItem=!1,this.desktop(),this.mobile()}removeSubmenuActive(){s(".zc-panel-menu").removeClass("zc-panel-menu_submenu-active"),s(".zc-panel-content").removeClass("zc-panel-content_submenu-active")}addSubmenuActive(){s(".zc-panel-menu").addClass("zc-panel-menu_submenu-active"),s(".zc-panel-content").addClass("zc-panel-content_submenu-active")}isSubmenuActive(){return s(".zc-panel-menu").hasClass("zc-panel-menu_submenu-active")&&s(".zc-panel-content").hasClass("zc-panel-content_submenu-active")}displaySection(e){const t=s(`.zc-panel-menu li[data-menu-item-id="${e}"]`),n=t.find("i").first().attr("class").match(/\bzc-icon\S+/g)[0];s(".zc-panel-header__title-icon").removeClass(((e,t)=>(t.match(/\bzc-icon\S+/g)||[]).join(" "))).addClass(n),s(".zc-panel-header__title").text(t.find("span").text()),this.menuItemID&&s(`.zc-panel-controls__section[data-section="${this.menuItemID}"]`).removeClass("zc-panel-controls__section_active");const i=s(`.zc-panel-controls__section[data-section="${e}"]`);if(i.addClass("zc-panel-controls__section_active"),s(window).trigger("zc/panel/menu/item-change"),this.addCache("menu/current-section",i),i.hasClass("zc-panel-controls__section_ICP")||(i.addClass("zc-panel-controls__section_ICP"),s(window).trigger("zc/panel/menu/item-change-ICP",[i])),t.parent().hasClass("zc-panel-submenu__list")){let e=t.parent().parent().parent().parent();e.hasClass("zc-panel-submenu__scrollbar-container")&&(e=e.parent()),e.addClass("zc-panel-submenu__container_active");const n=e.data("menu-container-id"),i=s(`.zc-panel-menu__item_type_parent[data-menu-container-id="${n}"]`);t.addClass("zc-panel-submenu__item_active"),i.addClass("zc-panel-menu__item_active"),this.isSubmenuActive()||this.addSubmenuActive(),this.isSubmenuItem=!0,this.submenuItem=e,this.menuParentItem=i}else t.addClass("zc-panel-menu__item_active"),this.isSubmenuActive()&&this.removeSubmenuActive(),this.isSubmenuItem=!1,this.submenuItem=!1,this.menuParentItem=!1;this.menuItem=t,this.menuItemID=e}prepMenuItem(e){this.isSubmenuItem?(this.menuItem.removeClass("zc-panel-submenu__item_active"),this.menuParentItem.removeClass("zc-panel-menu__item_active"),this.submenuItem.removeClass("zc-panel-submenu__container_active"),this.displaySection(e)):(this.menuItem.removeClass("zc-panel-menu__item_active"),this.displaySection(e)),s(".zc-panel-content .zc-scrollbar").scrollTop(0)}desktop(){let e="";if(s.param.fragment()&&(e=s.param.fragment()||""),0===s(`.zc-panel-menu li[data-menu-item-id="${e}"]`).length){let t=s(".zc-panel-menu__list .zc-panel-menu__item_type_simple").first();if(e=t.data("menu-item-id"),!e){const n=t.data("menu-container-id");t=s(`.zc-panel-submenu__container[data-menu-container-id=${n}] .zc-panel-submenu__item_type_simple`).first(),e=t.data("menu-item-id")}}this.displaySection(e),s(window).on("hashchange.zc-panel",(e=>{let t=s.param.fragment()?s.param.fragment():"";0===s(`.zc-panel-menu li[data-menu-item-id="${t}"]`).length&&(t=void 0),void 0!==t&&this.prepMenuItem(t)})),this.click(".zc-panel-menu__item_type_parent",(e=>{const t=e.data("menu-container-id"),n=s(`.zc-panel-submenu__container[data-menu-container-id=${t}] .zc-panel-submenu__item_type_simple`).first().data("menu-item-id");void 0!==n&&(window.location.hash=n)})),this.click(".zc-panel-menu__item_type_simple:not(.zc-panel-menu__item_active)",(e=>{const t=e.data("menu-item-id");void 0!==t&&(window.location.hash=t)})),this.click(".zc-panel-submenu__item_type_simple:not(.zc-panel-submenu__item_active)",(e=>{const t=e.data("menu-item-id");t&&(window.location.hash=t)}))}mobile(){this.click(".zc-panel-header__controller-button_type_mobile-menu",(e=>{if(e.hasClass("zc-panel-header__controller-button_type_mobile-menu_active"))e.removeClass("zc-panel-header__controller-button_type_mobile-menu_active"),s(".zc-panel-content").removeClass("zc-panel-content_mobile-menu-visible"),e.one("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",(()=>{s(".zc-panel-controls").height("auto")})),this.service("close-block").hideDefinitely();else{e.addClass("zc-panel-header__controller-button_type_mobile-menu_active"),s(".zc-panel-content").addClass("zc-panel-content_mobile-menu-visible");let t=s(".zc-panel-menu__container").height(),n=s(".zc-panel-menu__list").height()+this.getConfig("height-FAH"),i=s(".zc-panel-controls").height();t>n&&(n=t),n>i&&(s(".zc-panel-controls").height(n-this.getConfig("height-FAH")),s(".zc-panel-submenu__scrollbar-container").height(n-this.getConfig("header-height")));let a=s.param.fragment()?s.param.fragment():"";0===s(`.zc-panel-menu li[data-menu-item-id="${a}"]`).length&&(a=void 0),void 0!==a&&this.prepMenuItem(a),this.service("close-block").show(),this.scrollbarTop()}})),s(window).on("zc/close-block.zc-panel",(()=>{s(".zc-panel-header__controller-button_type_mobile-menu").hasClass("zc-panel-header__controller-button_type_mobile-menu_active")&&(s(".zc-panel-header__controller-button_type_mobile-menu").removeClass("zc-panel-header__controller-button_type_mobile-menu_active"),s(".zc-panel-content").removeClass("zc-panel-content_mobile-menu-visible"),s(".zc-panel-header__controller-button_type_mobile-menu").one("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",(()=>{s(".zc-panel-controls").height("auto")})),this.service("close-block").hideDefinitely())})),this.click(".zc-panel-submenu__header-section_mode_mobile",(()=>{this.removeSubmenuActive(),this.scrollbarTop(),window.location.hash=""}))}}const l=jQuery;class r extends t{constructor(){super(),this.cache={},this.regex=/(.+?):(notEmpty|empty|is|not|contains|<|<=|>|>=)\((.*?)\),?/g,this.firstStart(),this.dataCaching(),this.onChange()}firstStart(){l(window).on("zc/panel/menu/item-change-ICP",((e,t)=>{t&&t.find("[data-condition]").each(((e,t)=>{this.parse(l(t),!0)}))}))}onChange(){l(".zc-panel .zc-panel-controls").on("change","[data-option]",(e=>{e.preventDefault(),e.stopPropagation();const t=l(e.currentTarget);let n=t.attr("name")||"";return n=n.replace("[]",""),void 0!==this.cache[n]&&l.each(this.cache[n],((e,t)=>{this.parse(t)})),void 0===t.data("i")&&(this.addCache("changed",!0),l(window).trigger("zc/panel/if-changed")),!1}))}dataCaching(){l(".zc-panel .zc-panel-controls [data-condition]").each(((e,t)=>{let n;for(;n=this.regex.exec(l(t).data("condition"));){let e=this.getVar("prefix-slug")+n[1];void 0===this.cache[e]&&(this.cache[e]=[]),this.cache[e].push(l(t))}}))}parse(e,t){let n,i=this.prepConditions(e.data("condition")),a=(e.data("condition-operator")||"and").toLowerCase();l.each(i,((e,t)=>{let i=!1,c=l(`.zc-panel .zc-panel-controls [name=${this.getVar("prefix-slug")}${t.check}]`);if(c.length>0&&c.is("[data-option]")?i=!0:(c=l(`.zc-panel .zc-panel-controls [id=${this.getVar("prefix-slug")}${t.check}]`),c.length>0&&c.is("[data-option]")&&(i=!0)),!0===i){const e=null!==c.val()?c.val().toString():"",i=t.value.toString();let s;switch(t.rule){case"<":s=parseInt(e)<parseInt(i);break;case"<=":s=parseInt(e)<=parseInt(i);break;case">":s=parseInt(e)>parseInt(i);break;case">=":s=parseInt(e)>=parseInt(i);break;case"contains":s=-1!==e.indexOf(i);break;case"is":s=e==i;break;case"not":s=e!=i;break;case"notEmpty":s=!!e;break;case"empty":s=!e}void 0===n&&(n=s),n="or"===a?n||s:n&&s}})),t&&void 0!==t?n?(e.addClass("zc-panel-controls__item_show"),e.data("condition-show",!0)):(e.addClass("zc-panel-controls__item_hide"),e.data("condition-show",!1)):n?!0!==e.data("condition-show")&&(e.removeClass("zc-panel-controls__item_hide"),e.addClass("zc-panel-controls__item_show"),e.data("condition-show",!0)):!1!==e.data("condition-show")&&(e.removeClass("zc-panel-controls__item_show"),e.addClass("zc-panel-controls__item_hide"),e.data("condition-show",!1)),n=void 0}prepConditions(e){let t,n=[];for(;t=this.regex.exec(e);)n.push({check:t[1],rule:t[2],value:t[3]||""});return n}}const d=jQuery;class h extends t{constructor(){super(),this.global.cache={changed:!1,services:{}},this.global.config={"right-margin":{desktop:20,mobile:10},"bottom-margin":42,"footer-height":56,"header-height":56,"height-FAH":112,"wp-body-height":0,"min-size":{"body-height":500,mode1:490,mode2:950},"wp-admin-bar-height":32},this.global.vars=zcPanelVars,this.service("callback",new c)}checkBrowserCompatibility(){try{new IntersectionObserver((e=>{})),new ResizeObserver((e=>{}))}catch(e){throw this.getVar("browser-error-subject")}}menu(){this.service("menu",new o)}closeBlock(){this.service("close-block",new i)}scrollbar(){if(!zc.isMobile()&&-1==navigator.userAgent.indexOf("Firefox")){const e={checkIfActive:(e,t)=>{const n=e.outerHeight(!0),i=t.outerHeight(!0);n>0&&(i>n?e.addClass("zc-scrollbar_active"):e.removeClass("zc-scrollbar_active"))}};e.ro=new ResizeObserver((t=>{void 0!==t[0]&&t.forEach((t=>{e.checkIfActive(d(t.target).parent(),d(t.target))}))})),d(".zc-panel .zc-scrollbar").each(((t,n)=>{e.ro.observe(d(n).children().first().get(0))})),d(window).on("zc/panel/size-changed",(()=>{d(".zc-panel .zc-scrollbar").each(((t,n)=>{e.checkIfActive(d(n),d(n).children().first())}))}))}}noMetaScaleIfMobile(){zc.isMobile()&&d("head meta[name=viewport]").attr("content","width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0")}condition(){new r(this)}ifChanged(){d(window).on("beforeunload.zc-panel",(()=>{if(this.getCache("changed"))return this.getVar("if-changed")}))}controlHelp(){const e={width:600,height:250};this.click(".zc-panel-help__starter_type_simple",(t=>{let n=t.data("settings");void 0!==n&&""!==n&&null!=n||(n={}),e.title=t.attr("title"),e.html=t.parent().find(".zc-panel-help__content").text(),zc.popup().add(d.extend({},e,n))}))}controlInit(){this.service("callback").run("control",d,this)}tooltip(){!1===zc.isMobile()&&d(".zc-panel [data-tooltip]").tipsy({title:"data-tooltip",gravity:function(){var e=d(this).data("tooltip-position");if(!e)return"n";switch(e){case"top":return"s";case"right":return"w";case"bottom":default:return"n";case"left":return"e"}},on:!0,offset:3,opacity:1})}}zc.addModule("panel",(e=>{const t=new h;return e((()=>{try{if(void 0===t.mode)throw"panel.mode is undefined";if(!e.isFunction(t.mode))throw"panel.mode is not function";t.checkBrowserCompatibility(),t.mode(e,t)}catch(n){e(".zc-panel-template").length>0?e(".zc-panel-template").empty().append(`<div class="error notice"><p><b>${t.getVar("browser-error-title")}</b> : ${n}</p></div>`):(e("#wpbody-content").prepend(`<div class="error notice"><p><b>${t.getVar("browser-error-title")}</b> : ${n}</p></div>`),alert(`${t.getVar("browser-error-title")} : ${n}`))}})),{addControl:e=>{const n=document.getElementsByTagName("script"),i=n[n.length-1].src.split("/"),a=i[i.length-5],c=t.getVar("controls")[a];t.service("callback").add("control",e,c)},addMode:e=>{t.mode=e}}}))})();