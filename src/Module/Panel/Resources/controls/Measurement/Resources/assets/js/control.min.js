"use strict";zc.module.panel.setControl(function(s,c,o){var r={setDefaultValue:function(n,t){var e=t.match(/[+-]?([0-9]*[.])?[0-9]+/),a=t.replace(/[+-]?([0-9]*[.])?[0-9]+/g,"");null!==e?n.find(".zc-panel-control-measurement__input").val(e[0]):console.error("Control : Measurement - Default value is null"),a?n.find(".zc-panel-control-measurement__container").hasClass("zc-panel-control-measurement__container_only")?n.find(".zc-panel-control-measurement__unit").text(a):n.find(".zc-panel-control-measurement__select").val(a).change().trigger("chosen:updated"):n.addClass("zc-panel-control-measurement_no-unit")},inputNumber:function(n){var t={settings:{input:!1,buttonInc:!1,buttonDec:!1,min:1,max:100,step:1,ifIncCallback:function(){},ifDecCallback:function(){},ifChangeCallback:function(){},ifErrorCallback:function(){}},setSettings:function(n){return this.settings=n,this},manualInput:function(){var e=this;e.settings.input.on("input",function(n){n.preventDefault();var t=s(this).val();t.match(/[+-]?([0-9]*[.])?[0-9]+/)&&t>=e.settings.min&&t<=e.settings.max?e.settings.ifChangeCallback.call(this,t):e.settings.ifErrorCallback.call(this,t)})},manualScroll:function(){var e=this;e.settings.input.on("wheel",function(n){var t;s(this).is(":focus")&&(n.preventDefault(),t=e.settings.input.val(),n.originalEvent.deltaY<0?(t=parseFloat(t)+parseFloat(e.settings.step),(t=zc.round(t,3))>=e.settings.min&&t<=e.settings.max&&e.settings.ifIncCallback.call(this,t)):(t=parseFloat(t)-parseFloat(e.settings.step),(t=zc.round(t,3))>=e.settings.min&&t<=e.settings.max&&e.settings.ifDecCallback.call(this,t)))})},buttonInc:function(){var e=this,a=null,i=null;e.settings.buttonInc.on("mousedown",function(n){n.preventDefault(),s(e.settings.input).blur();var t=e.settings.input.val(),t=parseFloat(t)+parseFloat(e.settings.step);(t=zc.round(t,3))>=e.settings.min&&t<=e.settings.max&&e.settings.ifIncCallback.call(this,t),a=setTimeout(function(){i=setInterval(function(){t=parseFloat(t)+parseFloat(e.settings.step),(t=zc.round(t,3))>=e.settings.min&&t<=e.settings.max&&e.settings.ifIncCallback.call(this,t)},75)},500)}).on("mouseup",function(){clearTimeout(a),clearInterval(i)})},buttonDec:function(){var e=this,a=null,i=null;e.settings.buttonDec.on("mousedown",function(n){n.preventDefault(),s(e.settings.input).blur();var t=e.settings.input.val(),t=parseFloat(t)-parseFloat(e.settings.step);(t=zc.round(t,3))>=e.settings.min&&t<=e.settings.max&&e.settings.ifDecCallback.call(this,t),a=setTimeout(function(){i=setInterval(function(){t=parseFloat(t)-parseFloat(e.settings.step),(t=zc.round(t,3))>=e.settings.min&&t<=e.settings.max&&e.settings.ifDecCallback.call(this,t)},75)},500)}).on("mouseup",function(){clearTimeout(a),clearInterval(i)})}};t.setSettings(n),t.manualInput(),t.manualScroll(),t.buttonInc(),t.buttonDec()},initMeasurement:function(e){var n=e.find("input[type=hidden]").val()||"0px",t=e.find(".zc-panel-control-measurement__input").data("min"),a=e.find(".zc-panel-control-measurement__input").data("max"),i=e.find(".zc-panel-control-measurement__input").data("step");"infinity"==a&&(a=1/0),0<e.find("select").length&&e.find("select").chosen({width:"100%",disable_search_threshold:10}),zc.isMobile()&&e.addClass("_zc-panel-controls_mobile"),"inherit"!=n?r.setDefaultValue(e,n):(e.find(".zc-panel-control-measurement__input").prop("disabled",!0),e.find(".zc-panel-control-measurement__inherit-type").addClass("zc-panel-control-measurement__inherit-type_active"),e.find(".zc-panel-control-measurement__inherit-container").addClass("zc-panel-control-measurement__inherit-container_active"),e.hasClass("zc-panel-control-measurement_only")&&r.setDefaultValue(e,e.data("default")));var l=zc.strReplace(["{MIN}","{MAX}"],[t,a],o["title-range-error"]);r.inputNumber({input:e.find(".zc-panel-control-measurement__input"),buttonInc:e.find(".zc-panel-control-measurement__spinner-button_inc"),buttonDec:e.find(".zc-panel-control-measurement__spinner-button_dec"),min:t,max:a,step:i,ifIncCallback:function(n){var t;e.find(".zc-panel-control-measurement__input").removeClass("zc-panel-control-measurement__input_bad-value"),e.find(".zc-panel-control-measurement__input").attr("title",""),c.enableSaveButton(),e.find(".zc-panel-control-measurement__input").val(n),t=e.hasClass("zc-panel-control-measurement_only")?e.find(".zc-panel-control-measurement__unit").text():e.find("select").val(),e.find("input[type=hidden]").val(e.find(".zc-panel-control-measurement__input").val()+t).change()},ifDecCallback:function(n){var t;e.find(".zc-panel-control-measurement__input").removeClass("zc-panel-control-measurement__input_bad-value"),e.find(".zc-panel-control-measurement__input").attr("title",""),c.enableSaveButton(),e.find(".zc-panel-control-measurement__input").val(n),t=e.hasClass("zc-panel-control-measurement_only")?e.find(".zc-panel-control-measurement__unit").text():e.find("select").val(),e.find("input[type=hidden]").val(e.find(".zc-panel-control-measurement__input").val()+t).change()},ifChangeCallback:function(n){var t;e.find(".zc-panel-control-measurement__input").removeClass("zc-panel-control-measurement__input_bad-value"),e.find(".zc-panel-control-measurement__input").attr("title",""),c.enableSaveButton(),e.find(".zc-panel-control-measurement__input").val(n),t=e.hasClass("zc-panel-control-measurement_only")?e.find(".zc-panel-control-measurement__unit").text():e.find("select").val(),e.find("input[type=hidden]").val(e.find(".zc-panel-control-measurement__input").val()+t).change()},ifErrorCallback:function(n){e.find(".zc-panel-control-measurement__input").addClass("zc-panel-control-measurement__input_bad-value"),e.find(".zc-panel-control-measurement__input").attr("title",l),c.disableSaveButton()}}),e.on("change","select",function(n){n.preventDefault();var t=e.find(".zc-panel-control-measurement__input").val();e.find("input[type=hidden]").val(t+s(this).val()).change()}),e.on("click",".zc-panel-control-measurement__inherit-type",function(n){n.preventDefault();var t=e.find(".zc-panel-control-measurement__input");t.prop("disabled")?(t.prop("disabled",!1),s(this).removeClass("zc-panel-control-measurement__inherit-type_active"),s(this).parent().find(".zc-panel-control-measurement__inherit-container").removeClass("zc-panel-control-measurement__inherit-container_active"),void 0===s(this).data("output")?(r.setDefaultValue(e,e.data("default")),e.find("input[type=hidden]").val(e.data("default")).change()):e.find("input[type=hidden]").val(s(this).data("output")).change()):(t.prop("disabled",!0),s(this).addClass("zc-panel-control-measurement__inherit-type_active"),s(this).parent().find(".zc-panel-control-measurement__inherit-container").addClass("zc-panel-control-measurement__inherit-container_active"),s(this).data("output",e.find("input[type=hidden]").val()),e.find("input[type=hidden]").val("inherit").change())})}},e=new IntersectionObserver(function(n,t){n.forEach(function(n){0<n.intersectionRatio&&(s(n.target).hasClass("zc-panel-control-measurement_activated")||(s(n.target).addClass("zc-panel-control-measurement_activated"),r.initMeasurement(s(n.target))))})},{root:null});s(window).on("zc/panel/menu/item-change-ICP",function(n,t){t&&t.find(".zc-panel-control-measurement").each(function(n,t){e.observe(t)})})});