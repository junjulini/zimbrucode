(()=>{"use strict";zc.module.panel.addControl(((e,t,n)=>{const a={addDefaultValue:(e,t)=>{const n=t.match(/[+-]?([0-9]*[.])?[0-9]+/),a=t.replace(/[+-]?([0-9]*[.])?[0-9]+/g,"");null!==n?e.find(".zc-panel-control-measurement__input").val(n[0]):console.error("Control : Measurement - Default value is null"),a?e.find(".zc-panel-control-measurement__container").hasClass("zc-panel-control-measurement__container_only")?e.find(".zc-panel-control-measurement__unit").text(a):e.find(".zc-panel-control-measurement__select").val(a).change().trigger("chosen:updated"):e.addClass("zc-panel-control-measurement_no-unit")}};a.inputNumber=t=>{const n={settings:{input:!1,buttonInc:!1,buttonDec:!1,min:1,max:100,step:1,ifIncCallback:()=>{},ifDecCallback:()=>{},ifChangeCallback:()=>{},ifErrorCallback:()=>{}},addSettings:function(e){return this.settings=e,this},manualInput:function(){const t=this;t.settings.input.on("input",(function(n){n.preventDefault();const a=e(this).val();a.match(/[+-]?([0-9]*[.])?[0-9]+/)&&a>=t.settings.min&&a<=t.settings.max?t.settings.ifChangeCallback.call(this,a):t.settings.ifErrorCallback.call(this,a)}))},manualScroll:function(){const t=this;t.settings.input.on("wheel",(function(n){if(e(this).is(":focus")){n.preventDefault();let e=t.settings.input.val();n.originalEvent.deltaY<0?(e=parseFloat(e)+parseFloat(t.settings.step),e=zc.round(e,3),e>=t.settings.min&&e<=t.settings.max&&t.settings.ifIncCallback.call(this,e)):(e=parseFloat(e)-parseFloat(t.settings.step),e=zc.round(e,3),e>=t.settings.min&&e<=t.settings.max&&t.settings.ifDecCallback.call(this,e))}}))},buttonInc:function(){const t=this;let n=null,a=null;t.settings.buttonInc.on("mousedown",(l=>{l.preventDefault(),e(t.settings.input).blur();let i=t.settings.input.val();i=parseFloat(i)+parseFloat(t.settings.step),i=zc.round(i,3),i>=t.settings.min&&i<=t.settings.max&&t.settings.ifIncCallback.call(this,i),n=setTimeout((()=>{a=setInterval((()=>{i=parseFloat(i)+parseFloat(t.settings.step),i=zc.round(i,3),i>=t.settings.min&&i<=t.settings.max&&t.settings.ifIncCallback.call(this,i)}),75)}),500)})).on("mouseup",(()=>{clearTimeout(n),clearInterval(a)}))},buttonDec:function(){const t=this;let n=null,a=null;t.settings.buttonDec.on("mousedown",(function(l){l.preventDefault(),e(t.settings.input).blur();let i=t.settings.input.val();i=parseFloat(i)-parseFloat(t.settings.step),i=zc.round(i,3),i>=t.settings.min&&i<=t.settings.max&&t.settings.ifDecCallback.call(this,i),n=setTimeout((()=>{a=setInterval((()=>{i=parseFloat(i)-parseFloat(t.settings.step),i=zc.round(i,3),i>=t.settings.min&&i<=t.settings.max&&t.settings.ifDecCallback.call(this,i)}),75)}),500)})).on("mouseup",(()=>{clearTimeout(n),clearInterval(a)}))}};n.addSettings(t),n.manualInput(),n.manualScroll(),n.buttonInc(),n.buttonDec()},a.initMeasurement=l=>{let i=l.find("input[type=hidden]").val()||"0px",s=l.find(".zc-panel-control-measurement__input").data("min"),c=l.find(".zc-panel-control-measurement__input").data("max"),o=l.find(".zc-panel-control-measurement__input").data("step");"infinity"==c&&(c=1/0),l.find("select").length>0&&l.find("select").chosen({width:"100%",disable_search_threshold:10}),zc.isMobile()&&l.addClass("zc-panel-control-measurement_mobile"),"inherit"!=i?a.addDefaultValue(l,i):(l.find(".zc-panel-control-measurement__input").prop("disabled",!0),l.find(".zc-panel-control-measurement__inherit-type").addClass("zc-panel-control-measurement__inherit-type_active"),l.find(".zc-panel-control-measurement__inherit-container").addClass("zc-panel-control-measurement__inherit-container_active"),l.hasClass("zc-panel-control-measurement_only")&&a.addDefaultValue(l,l.data("default")));const r=zc.strReplace(["{MIN}","{MAX}"],[s,c],n["title-range-error"]);a.inputNumber({input:l.find(".zc-panel-control-measurement__input"),buttonInc:l.find(".zc-panel-control-measurement__spinner-button_inc"),buttonDec:l.find(".zc-panel-control-measurement__spinner-button_dec"),min:s,max:c,step:o,ifIncCallback:e=>{if(l.find(".zc-panel-control-measurement__input").removeClass("zc-panel-control-measurement__input_bad-value"),l.find(".zc-panel-control-measurement__input").attr("title",""),t.enableSaveButton(),l.find(".zc-panel-control-measurement__input").val(e),l.hasClass("zc-panel-control-measurement_only"))var n=l.find(".zc-panel-control-measurement__unit").text();else n=l.find("select").val();l.find("input[type=hidden]").val(l.find(".zc-panel-control-measurement__input").val()+n).change()},ifDecCallback:e=>{if(l.find(".zc-panel-control-measurement__input").removeClass("zc-panel-control-measurement__input_bad-value"),l.find(".zc-panel-control-measurement__input").attr("title",""),t.enableSaveButton(),l.find(".zc-panel-control-measurement__input").val(e),l.hasClass("zc-panel-control-measurement_only"))var n=l.find(".zc-panel-control-measurement__unit").text();else n=l.find("select").val();l.find("input[type=hidden]").val(l.find(".zc-panel-control-measurement__input").val()+n).change()},ifChangeCallback:e=>{if(l.find(".zc-panel-control-measurement__input").removeClass("zc-panel-control-measurement__input_bad-value"),l.find(".zc-panel-control-measurement__input").attr("title",""),t.enableSaveButton(),l.find(".zc-panel-control-measurement__input").val(e),l.hasClass("zc-panel-control-measurement_only"))var n=l.find(".zc-panel-control-measurement__unit").text();else n=l.find("select").val();l.find("input[type=hidden]").val(l.find(".zc-panel-control-measurement__input").val()+n).change()},ifErrorCallback:e=>{l.find(".zc-panel-control-measurement__input").addClass("zc-panel-control-measurement__input_bad-value"),l.find(".zc-panel-control-measurement__input").attr("title",r),t.disableSaveButton()}}),l.on("change","select",(function(t){t.preventDefault();const n=l.find(".zc-panel-control-measurement__input").val();l.find("input[type=hidden]").val(n+e(this).val()).change()})),l.on("click",".zc-panel-control-measurement__inherit-type",(function(t){t.preventDefault();const n=l.find(".zc-panel-control-measurement__input");n.prop("disabled")?(n.prop("disabled",!1),e(this).removeClass("zc-panel-control-measurement__inherit-type_active"),e(this).parent().find(".zc-panel-control-measurement__inherit-container").removeClass("zc-panel-control-measurement__inherit-container_active"),void 0===e(this).data("output")?(a.addDefaultValue(l,l.data("default")),l.find("input[type=hidden]").val(l.data("default")).change()):l.find("input[type=hidden]").val(e(this).data("output")).change()):(n.prop("disabled",!0),e(this).addClass("zc-panel-control-measurement__inherit-type_active"),e(this).parent().find(".zc-panel-control-measurement__inherit-container").addClass("zc-panel-control-measurement__inherit-container_active"),e(this).data("output",l.find("input[type=hidden]").val()),l.find("input[type=hidden]").val("inherit").change())}))};const l=new IntersectionObserver(((t,n)=>{t.forEach((t=>{t.intersectionRatio>0&&(e(t.target).hasClass("zc-panel-control-measurement_activated")||(e(t.target).addClass("zc-panel-control-measurement_activated"),a.initMeasurement(e(t.target))))}))}),{root:null,threshold:.25});e(window).on("zc/panel/menu/item-change-ICP",((e,t)=>{t&&t.find(".zc-panel-control-measurement").each(((e,t)=>{l.observe(t)}))}))}))})();