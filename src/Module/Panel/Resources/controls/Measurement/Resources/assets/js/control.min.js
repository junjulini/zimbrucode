(()=>{"use strict";zc.module.panel.addControl(((e,n,t)=>{const a={addDefaultValue:(e,n)=>{const t=n.match(/[+-]?([0-9]*[.])?[0-9]+/),a=n.replace(/[+-]?([0-9]*[.])?[0-9]+/g,"");null!==t?e.find(".zc-panel-control-measurement__input").val(t[0]):console.error("Control : Measurement - Default value is null"),a?e.find(".zc-panel-control-measurement__container").hasClass("zc-panel-control-measurement__container_only")?e.find(".zc-panel-control-measurement__unit").text(a):e.find(".zc-panel-control-measurement__select").val(a).change().trigger("chosen:updated"):e.addClass("zc-panel-control-measurement_no-unit")}};a.inputNumber=n=>{const t={settings:{input:!1,buttonInc:!1,buttonDec:!1,min:1,max:100,step:1,ifIncCallback:()=>{},ifDecCallback:()=>{},ifChangeCallback:()=>{},ifErrorCallback:()=>{}},addSettings:function(e){return this.settings=e,this},manualInput:function(){const n=this;n.settings.input.on("input",(function(t){t.preventDefault();const a=e(this).val();a.match(/[+-]?([0-9]*[.])?[0-9]+/)&&a>=n.settings.min&&a<=n.settings.max?n.settings.ifChangeCallback(a):n.settings.ifErrorCallback(a)}))},manualScroll:function(){const n=this;n.settings.input.on("wheel",(function(t){if(e(this).is(":focus")){t.preventDefault();let e=n.settings.input.val();t.originalEvent.deltaY<0?(e=parseFloat(e)+parseFloat(n.settings.step),e=zc.round(e,3),e>=n.settings.min&&e<=n.settings.max&&n.settings.ifIncCallback(e)):(e=parseFloat(e)-parseFloat(n.settings.step),e=zc.round(e,3),e>=n.settings.min&&e<=n.settings.max&&n.settings.ifDecCallback(e))}}))},buttonInc:function(){const n=this;let t=null,a=null;n.settings.buttonInc.on("mousedown",(l=>{l.preventDefault(),e(n.settings.input).blur();let i=n.settings.input.val();i=parseFloat(i)+parseFloat(n.settings.step),i=zc.round(i,3),i>=n.settings.min&&i<=n.settings.max&&n.settings.ifIncCallback(i),t=setTimeout((()=>{a=setInterval((()=>{i=parseFloat(i)+parseFloat(n.settings.step),i=zc.round(i,3),i>=n.settings.min&&i<=n.settings.max&&n.settings.ifIncCallback(i)}),75)}),500)})).on("mouseup",(()=>{clearTimeout(t),clearInterval(a)}))},buttonDec:function(){const n=this;let t=null,a=null;n.settings.buttonDec.on("mousedown",(function(l){l.preventDefault(),e(n.settings.input).blur();let i=n.settings.input.val();i=parseFloat(i)-parseFloat(n.settings.step),i=zc.round(i,3),i>=n.settings.min&&i<=n.settings.max&&n.settings.ifDecCallback(i),t=setTimeout((()=>{a=setInterval((()=>{i=parseFloat(i)-parseFloat(n.settings.step),i=zc.round(i,3),i>=n.settings.min&&i<=n.settings.max&&n.settings.ifDecCallback(i)}),75)}),500)})).on("mouseup",(()=>{clearTimeout(t),clearInterval(a)}))}};t.addSettings(n),t.manualInput(),t.manualScroll(),t.buttonInc(),t.buttonDec()},a.initMeasurement=l=>{let i=l.find("input[type=hidden]").val()||"0px",s=l.find(".zc-panel-control-measurement__input").data("min"),o=l.find(".zc-panel-control-measurement__input").data("max"),c=l.find(".zc-panel-control-measurement__input").data("step");"infinity"==o&&(o=1/0),l.find("select").length>0&&l.find("select").chosen({width:"100%",disable_search_threshold:10}),zc.isMobile()&&l.addClass("zc-panel-control-measurement_mobile"),"inherit"!=i?a.addDefaultValue(l,i):(l.find(".zc-panel-control-measurement__input").prop("disabled",!0),l.find(".zc-panel-control-measurement__inherit-type").addClass("zc-panel-control-measurement__inherit-type_active"),l.find(".zc-panel-control-measurement__inherit-container").addClass("zc-panel-control-measurement__inherit-container_active"),l.hasClass("zc-panel-control-measurement_only")&&a.addDefaultValue(l,l.data("default")));const r=zc.strReplace(["{MIN}","{MAX}"],[s,o],t["title-range-error"]);a.inputNumber({input:l.find(".zc-panel-control-measurement__input"),buttonInc:l.find(".zc-panel-control-measurement__spinner-button_inc"),buttonDec:l.find(".zc-panel-control-measurement__spinner-button_dec"),min:s,max:o,step:c,ifIncCallback:e=>{if(l.find(".zc-panel-control-measurement__input").removeClass("zc-panel-control-measurement__input_bad-value"),l.find(".zc-panel-control-measurement__input").attr("title",""),n.enableSaveButton(),l.find(".zc-panel-control-measurement__input").val(e),l.hasClass("zc-panel-control-measurement_only"))var t=l.find(".zc-panel-control-measurement__unit").text();else t=l.find("select").val();l.find("input[type=hidden]").val(l.find(".zc-panel-control-measurement__input").val()+t).change()},ifDecCallback:e=>{if(l.find(".zc-panel-control-measurement__input").removeClass("zc-panel-control-measurement__input_bad-value"),l.find(".zc-panel-control-measurement__input").attr("title",""),n.enableSaveButton(),l.find(".zc-panel-control-measurement__input").val(e),l.hasClass("zc-panel-control-measurement_only"))var t=l.find(".zc-panel-control-measurement__unit").text();else t=l.find("select").val();l.find("input[type=hidden]").val(l.find(".zc-panel-control-measurement__input").val()+t).change()},ifChangeCallback:e=>{if(l.find(".zc-panel-control-measurement__input").removeClass("zc-panel-control-measurement__input_bad-value"),l.find(".zc-panel-control-measurement__input").attr("title",""),n.enableSaveButton(),l.find(".zc-panel-control-measurement__input").val(e),l.hasClass("zc-panel-control-measurement_only"))var t=l.find(".zc-panel-control-measurement__unit").text();else t=l.find("select").val();l.find("input[type=hidden]").val(l.find(".zc-panel-control-measurement__input").val()+t).change()},ifErrorCallback:e=>{l.find(".zc-panel-control-measurement__input").addClass("zc-panel-control-measurement__input_bad-value"),l.find(".zc-panel-control-measurement__input").attr("title",r),n.disableSaveButton()}}),l.on("change","select",(function(n){n.preventDefault();const t=l.find(".zc-panel-control-measurement__input").val();l.find("input[type=hidden]").val(t+e(this).val()).change()})),l.on("click",".zc-panel-control-measurement__inherit-type",(function(n){n.preventDefault();const t=l.find(".zc-panel-control-measurement__input");t.prop("disabled")?(t.prop("disabled",!1),e(this).removeClass("zc-panel-control-measurement__inherit-type_active"),e(this).parent().find(".zc-panel-control-measurement__inherit-container").removeClass("zc-panel-control-measurement__inherit-container_active"),void 0===e(this).data("output")?(a.addDefaultValue(l,l.data("default")),l.find("input[type=hidden]").val(l.data("default")).change()):l.find("input[type=hidden]").val(e(this).data("output")).change()):(t.prop("disabled",!0),e(this).addClass("zc-panel-control-measurement__inherit-type_active"),e(this).parent().find(".zc-panel-control-measurement__inherit-container").addClass("zc-panel-control-measurement__inherit-container_active"),e(this).data("output",l.find("input[type=hidden]").val()),l.find("input[type=hidden]").val("inherit").change())}))};const l=new IntersectionObserver(((n,t)=>{n.forEach((n=>{n.intersectionRatio>0&&(e(n.target).hasClass("zc-panel-control-measurement_activated")||(e(n.target).addClass("zc-panel-control-measurement_activated"),a.initMeasurement(e(n.target))))}))}),{root:null,threshold:.25});e(window).on("zc/panel/menu/item-change-ICP",((e,n)=>{n&&n.find(".zc-panel-control-measurement").each(((e,n)=>{l.observe(n)}))}))}))})();