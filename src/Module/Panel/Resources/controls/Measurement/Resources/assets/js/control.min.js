"use strict";zc.module.panel.setControl(function(s,c,o){var r={setDefaultValue:function(n,e){var t=e.match(/[+-]?([0-9]*[.])?[0-9]+/),a=e.replace(/[+-]?([0-9]*[.])?[0-9]+/g,"");null!==t?n.find(".zc-panel-control-measurement__input").val(t[0]):console.error("Control : Measurement - Default value is null"),a?n.find(".zc-panel-control-measurement__container").hasClass("zc-panel-control-measurement__container_only")?n.find(".zc-panel-control-measurement__unit").text(a):n.find(".zc-panel-control-measurement__select").val(a).change().trigger("chosen:updated"):n.addClass("zc-panel-control-measurement_no-unit")},inputNumber:function(n){var e={settings:{input:!1,buttonInc:!1,buttonDec:!1,min:1,max:100,step:1,ifIncCallback:function(){},ifDecCallback:function(){},ifChangeCallback:function(){},ifErrorCallback:function(){}},setSettings:function(n){return this.settings=n,this},manualInput:function(){var t=this;t.settings.input.on("input",function(n){n.preventDefault();var e=s(this).val();e.match(/[+-]?([0-9]*[.])?[0-9]+/)&&e>=t.settings.min&&e<=t.settings.max?t.settings.ifChangeCallback.call(this,e):t.settings.ifErrorCallback.call(this,e)})},manualScroll:function(){var t=this;t.settings.input.on("wheel",function(n){if(s(this).is(":focus")){n.preventDefault();var e=t.settings.input.val();n.originalEvent.deltaY<0?(e=parseFloat(e)+parseFloat(t.settings.step),(e=zc.round(e,3))>=t.settings.min&&e<=t.settings.max&&t.settings.ifIncCallback.call(this,e)):(e=parseFloat(e)-parseFloat(t.settings.step),(e=zc.round(e,3))>=t.settings.min&&e<=t.settings.max&&t.settings.ifDecCallback.call(this,e))}})},buttonInc:function(){var t=this,a=null,i=null;t.settings.buttonInc.on("mousedown",function(n){n.preventDefault(),s(t.settings.input).blur();var e=t.settings.input.val();e=parseFloat(e)+parseFloat(t.settings.step),(e=zc.round(e,3))>=t.settings.min&&e<=t.settings.max&&t.settings.ifIncCallback.call(this,e),a=setTimeout(function(){i=setInterval(function(){e=parseFloat(e)+parseFloat(t.settings.step),(e=zc.round(e,3))>=t.settings.min&&e<=t.settings.max&&t.settings.ifIncCallback.call(this,e)},75)},500)}).on("mouseup",function(){clearTimeout(a),clearInterval(i)})},buttonDec:function(){var t=this,a=null,i=null;t.settings.buttonDec.on("mousedown",function(n){n.preventDefault(),s(t.settings.input).blur();var e=t.settings.input.val();e=parseFloat(e)-parseFloat(t.settings.step),(e=zc.round(e,3))>=t.settings.min&&e<=t.settings.max&&t.settings.ifDecCallback.call(this,e),a=setTimeout(function(){i=setInterval(function(){e=parseFloat(e)-parseFloat(t.settings.step),(e=zc.round(e,3))>=t.settings.min&&e<=t.settings.max&&t.settings.ifDecCallback.call(this,e)},75)},500)}).on("mouseup",function(){clearTimeout(a),clearInterval(i)})}};e.setSettings(n),e.manualInput(),e.manualScroll(),e.buttonInc(),e.buttonDec()},initMeasurement:function(t){var n=t.find("input[type=hidden]").val()||"0px",e=t.find(".zc-panel-control-measurement__input").data("min"),a=t.find(".zc-panel-control-measurement__input").data("max"),i=t.find(".zc-panel-control-measurement__input").data("step");"infinity"==a&&(a=1/0),0<t.find("select").length&&t.find("select").chosen({width:"100%",disable_search_threshold:10}),zc.isMobile()&&t.addClass("_zc-panel-controls_mobile"),"inherit"!=n?r.setDefaultValue(t,n):(t.find(".zc-panel-control-measurement__input").prop("disabled",!0),t.find(".zc-panel-control-measurement__inherit-type").addClass("zc-panel-control-measurement__inherit-type_active"),t.find(".zc-panel-control-measurement__inherit-container").addClass("zc-panel-control-measurement__inherit-container_active"),t.hasClass("zc-panel-control-measurement_only")&&r.setDefaultValue(t,t.data("default")));var l=zc.strReplace(["{MIN}","{MAX}"],[e,a],o["title-range-error"]);r.inputNumber({input:t.find(".zc-panel-control-measurement__input"),buttonInc:t.find(".zc-panel-control-measurement__spinner-button_inc"),buttonDec:t.find(".zc-panel-control-measurement__spinner-button_dec"),min:e,max:a,step:i,ifIncCallback:function(n){if(t.find(".zc-panel-control-measurement__input").removeClass("zc-panel-control-measurement__input_bad-value"),t.find(".zc-panel-control-measurement__input").attr("title",""),c.enableSaveButton(),t.find(".zc-panel-control-measurement__input").val(n),t.hasClass("zc-panel-control-measurement_only"))var e=t.find(".zc-panel-control-measurement__unit").text();else e=t.find("select").val();t.find("input[type=hidden]").val(t.find(".zc-panel-control-measurement__input").val()+e).change()},ifDecCallback:function(n){if(t.find(".zc-panel-control-measurement__input").removeClass("zc-panel-control-measurement__input_bad-value"),t.find(".zc-panel-control-measurement__input").attr("title",""),c.enableSaveButton(),t.find(".zc-panel-control-measurement__input").val(n),t.hasClass("zc-panel-control-measurement_only"))var e=t.find(".zc-panel-control-measurement__unit").text();else e=t.find("select").val();t.find("input[type=hidden]").val(t.find(".zc-panel-control-measurement__input").val()+e).change()},ifChangeCallback:function(n){if(t.find(".zc-panel-control-measurement__input").removeClass("zc-panel-control-measurement__input_bad-value"),t.find(".zc-panel-control-measurement__input").attr("title",""),c.enableSaveButton(),t.find(".zc-panel-control-measurement__input").val(n),t.hasClass("zc-panel-control-measurement_only"))var e=t.find(".zc-panel-control-measurement__unit").text();else e=t.find("select").val();t.find("input[type=hidden]").val(t.find(".zc-panel-control-measurement__input").val()+e).change()},ifErrorCallback:function(n){t.find(".zc-panel-control-measurement__input").addClass("zc-panel-control-measurement__input_bad-value"),t.find(".zc-panel-control-measurement__input").attr("title",l),c.disableSaveButton()}}),t.on("change","select",function(n){n.preventDefault();var e=t.find(".zc-panel-control-measurement__input").val();t.find("input[type=hidden]").val(e+s(this).val()).change()}),t.on("click",".zc-panel-control-measurement__inherit-type",function(n){n.preventDefault();var e=t.find(".zc-panel-control-measurement__input");e.prop("disabled")?(e.prop("disabled",!1),s(this).removeClass("zc-panel-control-measurement__inherit-type_active"),s(this).parent().find(".zc-panel-control-measurement__inherit-container").removeClass("zc-panel-control-measurement__inherit-container_active"),void 0===s(this).data("output")?(r.setDefaultValue(t,t.data("default")),t.find("input[type=hidden]").val(t.data("default")).change()):t.find("input[type=hidden]").val(s(this).data("output")).change()):(e.prop("disabled",!0),s(this).addClass("zc-panel-control-measurement__inherit-type_active"),s(this).parent().find(".zc-panel-control-measurement__inherit-container").addClass("zc-panel-control-measurement__inherit-container_active"),s(this).data("output",t.find("input[type=hidden]").val()),t.find("input[type=hidden]").val("inherit").change())})}},t=new IntersectionObserver(function(n,e){n.forEach(function(n){0<n.intersectionRatio&&(s(n.target).hasClass("zc-panel-control-measurement_activated")||(s(n.target).addClass("zc-panel-control-measurement_activated"),r.initMeasurement(s(n.target))))})},{root:null});s(window).on("zc/panel/menu/item-change-ICP",function(n,e){e&&e.find(".zc-panel-control-measurement").each(function(n,e){t.observe(e)})})});