"use strict";zc.module.panel.addControl(function(s,c,o){var r={addDefaultValue:function(n,e){var t=e.match(/[+-]?([0-9]*[.])?[0-9]+/),e=e.replace(/[+-]?([0-9]*[.])?[0-9]+/g,"");null!==t?n.find(".zc-panel-control-measurement__input").val(t[0]):console.error("Control : Measurement - Default value is null"),e?n.find(".zc-panel-control-measurement__container").hasClass("zc-panel-control-measurement__container_only")?n.find(".zc-panel-control-measurement__unit").text(e):n.find(".zc-panel-control-measurement__select").val(e).change().trigger("chosen:updated"):n.addClass("zc-panel-control-measurement_no-unit")},inputNumber:function(n){var e={settings:{input:!1,buttonInc:!1,buttonDec:!1,min:1,max:100,step:1,ifIncCallback:function(){},ifDecCallback:function(){},ifChangeCallback:function(){},ifErrorCallback:function(){}},addSettings:function(n){return this.settings=n,this},manualInput:function(){var e=this;e.settings.input.on("input",function(n){n.preventDefault();n=s(this).val();(n.match(/[+-]?([0-9]*[.])?[0-9]+/)&&n>=e.settings.min&&n<=e.settings.max?e.settings.ifChangeCallback:e.settings.ifErrorCallback).call(this,n)})},manualScroll:function(){var t=this;t.settings.input.on("wheel",function(n){var e;s(this).is(":focus")&&(n.preventDefault(),e=t.settings.input.val(),n.originalEvent.deltaY<0?(e=parseFloat(e)+parseFloat(t.settings.step),(e=zc.round(e,3))>=t.settings.min&&e<=t.settings.max&&t.settings.ifIncCallback.call(this,e)):(e=parseFloat(e)-parseFloat(t.settings.step),(e=zc.round(e,3))>=t.settings.min&&e<=t.settings.max&&t.settings.ifDecCallback.call(this,e)))})},buttonInc:function(){var t=this,a=null,i=null;t.settings.buttonInc.on("mousedown",function(n){n.preventDefault(),s(t.settings.input).blur();var e=t.settings.input.val(),e=parseFloat(e)+parseFloat(t.settings.step);(e=zc.round(e,3))>=t.settings.min&&e<=t.settings.max&&t.settings.ifIncCallback.call(this,e),a=setTimeout(function(){i=setInterval(function(){e=parseFloat(e)+parseFloat(t.settings.step),(e=zc.round(e,3))>=t.settings.min&&e<=t.settings.max&&t.settings.ifIncCallback.call(this,e)},75)},500)}).on("mouseup",function(){clearTimeout(a),clearInterval(i)})},buttonDec:function(){var t=this,a=null,i=null;t.settings.buttonDec.on("mousedown",function(n){n.preventDefault(),s(t.settings.input).blur();var e=t.settings.input.val(),e=parseFloat(e)-parseFloat(t.settings.step);(e=zc.round(e,3))>=t.settings.min&&e<=t.settings.max&&t.settings.ifDecCallback.call(this,e),a=setTimeout(function(){i=setInterval(function(){e=parseFloat(e)-parseFloat(t.settings.step),(e=zc.round(e,3))>=t.settings.min&&e<=t.settings.max&&t.settings.ifDecCallback.call(this,e)},75)},500)}).on("mouseup",function(){clearTimeout(a),clearInterval(i)})}};e.addSettings(n),e.manualInput(),e.manualScroll(),e.buttonInc(),e.buttonDec()},initMeasurement:function(e){var n=e.find("input[type=hidden]").val()||"0px",t=e.find(".zc-panel-control-measurement__input").data("min"),a=e.find(".zc-panel-control-measurement__input").data("max"),i=e.find(".zc-panel-control-measurement__input").data("step");"infinity"==a&&(a=1/0),0<e.find("select").length&&e.find("select").chosen({width:"100%",disable_search_threshold:10}),zc.isMobile()&&e.addClass("zc-panel-control-measurement_mobile"),"inherit"!=n?r.addDefaultValue(e,n):(e.find(".zc-panel-control-measurement__input").prop("disabled",!0),e.find(".zc-panel-control-measurement__inherit-type").addClass("zc-panel-control-measurement__inherit-type_active"),e.find(".zc-panel-control-measurement__inherit-container").addClass("zc-panel-control-measurement__inherit-container_active"),e.hasClass("zc-panel-control-measurement_only")&&r.addDefaultValue(e,e.data("default")));var l=zc.strReplace(["{MIN}","{MAX}"],[t,a],o["title-range-error"]);r.inputNumber({input:e.find(".zc-panel-control-measurement__input"),buttonInc:e.find(".zc-panel-control-measurement__spinner-button_inc"),buttonDec:e.find(".zc-panel-control-measurement__spinner-button_dec"),min:t,max:a,step:i,ifIncCallback:function(n){e.find(".zc-panel-control-measurement__input").removeClass("zc-panel-control-measurement__input_bad-value"),e.find(".zc-panel-control-measurement__input").attr("title",""),c.enableSaveButton(),e.find(".zc-panel-control-measurement__input").val(n),n=e.hasClass("zc-panel-control-measurement_only")?e.find(".zc-panel-control-measurement__unit").text():e.find("select").val(),e.find("input[type=hidden]").val(e.find(".zc-panel-control-measurement__input").val()+n).change()},ifDecCallback:function(n){e.find(".zc-panel-control-measurement__input").removeClass("zc-panel-control-measurement__input_bad-value"),e.find(".zc-panel-control-measurement__input").attr("title",""),c.enableSaveButton(),e.find(".zc-panel-control-measurement__input").val(n),n=e.hasClass("zc-panel-control-measurement_only")?e.find(".zc-panel-control-measurement__unit").text():e.find("select").val(),e.find("input[type=hidden]").val(e.find(".zc-panel-control-measurement__input").val()+n).change()},ifChangeCallback:function(n){e.find(".zc-panel-control-measurement__input").removeClass("zc-panel-control-measurement__input_bad-value"),e.find(".zc-panel-control-measurement__input").attr("title",""),c.enableSaveButton(),e.find(".zc-panel-control-measurement__input").val(n),n=e.hasClass("zc-panel-control-measurement_only")?e.find(".zc-panel-control-measurement__unit").text():e.find("select").val(),e.find("input[type=hidden]").val(e.find(".zc-panel-control-measurement__input").val()+n).change()},ifErrorCallback:function(n){e.find(".zc-panel-control-measurement__input").addClass("zc-panel-control-measurement__input_bad-value"),e.find(".zc-panel-control-measurement__input").attr("title",l),c.disableSaveButton()}}),e.on("change","select",function(n){n.preventDefault();n=e.find(".zc-panel-control-measurement__input").val();e.find("input[type=hidden]").val(n+s(this).val()).change()}),e.on("click",".zc-panel-control-measurement__inherit-type",function(n){n.preventDefault();n=e.find(".zc-panel-control-measurement__input");n.prop("disabled")?(n.prop("disabled",!1),s(this).removeClass("zc-panel-control-measurement__inherit-type_active"),s(this).parent().find(".zc-panel-control-measurement__inherit-container").removeClass("zc-panel-control-measurement__inherit-container_active"),void 0===s(this).data("output")?(r.addDefaultValue(e,e.data("default")),e.find("input[type=hidden]").val(e.data("default")).change()):e.find("input[type=hidden]").val(s(this).data("output")).change()):(n.prop("disabled",!0),s(this).addClass("zc-panel-control-measurement__inherit-type_active"),s(this).parent().find(".zc-panel-control-measurement__inherit-container").addClass("zc-panel-control-measurement__inherit-container_active"),s(this).data("output",e.find("input[type=hidden]").val()),e.find("input[type=hidden]").val("inherit").change())})}},t=new IntersectionObserver(function(n,e){n.forEach(function(n){0<n.intersectionRatio&&(s(n.target).hasClass("zc-panel-control-measurement_activated")||(s(n.target).addClass("zc-panel-control-measurement_activated"),r.initMeasurement(s(n.target))))})},{root:null,threshold:.25});s(window).on("zc/panel/menu/item-change-ICP",function(n,e){e&&e.find(".zc-panel-control-measurement").each(function(n,e){t.observe(e)})})});