(()=>{"use strict";zc.module.panel.addControl(((t,e,a)=>{const n={frame:""};n.parseData=e=>{if(e&&void 0!==e){const a=[];e.find(".zc-panel-control-gallery-type__item").each((function(e,n){const l=t(this).data("id");l&&void 0!==l&&a.push(l)})),a&&e.find("input[type=hidden]").val(zc.parse(a,!0)).change()}},n.makeSortable=()=>{t(".zc-panel-control-gallery-type__list").sortable({opacity:.6,revert:!1,stop:function(e,a){n.parseData(t(this).parent())}}).disableSelection()},n.makeSortable(),e.click(".zc-panel-control-gallery-type__button",(e=>{n.frame&&n.frame.close(),n.frame=wp.media({title:a["window-title-1"],button:{text:a["window-text-1"]},library:{type:"image"},multiple:"add"}),n.frame.on("select",(()=>{const l=n.frame.state().get("selection").toJSON(),o=e.parent().find(".zc-panel-control-gallery-type__list");l&&t.isArray(l)&&t.when(t.each(l,((t,e)=>{"image"==e.type&&o.append(`<li class="zc-panel-control-gallery-type__item" data-id="${e.id}">\n                                <img src="${e.sizes.thumbnail.url}" width="80" height="80" class="zc-panel-control-gallery-type__image-preview">\n                                <button title="${a["button-title-1"]}" class="zc-panel-control-gallery-type__item-button zc-panel-control-gallery-type__item-button_change-image">\n                                    <i class="zc-panel-control-gallery-type__item-button-icon zc-icon-brush"></i>\n                                </button>\n                                <button title="${a["button-title-2"]}" class="zc-panel-control-gallery-type__item-button zc-panel-control-gallery-type__item-button_remove-image">\n                                    <i class="zc-panel-control-gallery-type__item-button-icon zc-icon-close"></i>\n                                </button>\n                            </li>`)}))).then((()=>{n.parseData(e.parent())}))})),n.makeSortable(),n.frame.open()})),e.click(".zc-panel-control-gallery-type__item-button_change-image",(t=>{const e=t.parent().parent().parent();n.frame&&n.frame.close(),n.frame=wp.media({title:a["window-title-2"],button:{text:a["window-text-2"]},library:{type:"image"},multiple:!1}),n.frame.on("select",(()=>{const a=n.frame.state().get("selection").first().toJSON();"image"==a.type&&(t.parent().data("id",a.id),t.parent().find(".zc-panel-control-gallery-type__image-preview").attr("src",a.sizes.thumbnail.url),n.parseData(e))})),n.frame.open()})),e.click(".zc-panel-control-gallery-type__item-button_remove-image",(t=>{const e=t.parent().parent().parent();t.parent().animate({opacity:0},200,(function(){t.parent().remove(),n.parseData(e)}))}))}))})();