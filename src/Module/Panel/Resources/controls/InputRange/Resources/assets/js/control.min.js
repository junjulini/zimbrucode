"use strict";zc.module.panel.addControl(function(i,r,s){var c={containerLBClass:"zc-panel-control-range__container_lb",leftIndicatorClass:"zc-panel-control-range__indicator_left",currentIndicatorClass:"zc-panel-control-range__indicator_current",rightIndicatorClass:"zc-panel-control-range__indicator_right",inputNumber:function(n){var t={settings:{input:!1,buttonInc:!1,buttonDec:!1,min:1,max:100,step:1,ifIncCallback:function(){},ifDecCallback:function(){},ifChangeCallback:function(){},ifErrorCallback:function(){}},addSettings:function(n){return this.settings=n,this},manualInput:function(){var a=this;a.settings.input.on("input",function(n){n.preventDefault();var t=i(this).val(),n="",n=isNaN(a.settings.step)||-1==a.settings.step.toString().indexOf(".")?/^\d+$/:/^-?\d*(\.\d+)?$/;(t.match(n)&&t>=a.settings.min&&t<=a.settings.max?a.settings.ifChangeCallback:a.settings.ifErrorCallback).call(this,t)})},manualScroll:function(){var a=this;a.settings.input.on("wheel",function(n){var t;i(this).is(":focus")&&(n.preventDefault(),t=a.settings.input.val(),n.originalEvent.deltaY<0?(t=parseFloat(t)+parseFloat(a.settings.step),(t=zc.round(t,3))>=a.settings.min&&t<=a.settings.max&&a.settings.ifIncCallback.call(this,t)):(t=parseFloat(t)-parseFloat(a.settings.step),(t=zc.round(t,3))>=a.settings.min&&t<=a.settings.max&&a.settings.ifDecCallback.call(this,t)))})},buttonInc:function(){var a=this,e=null,l=null;a.settings.buttonInc.on("mousedown",function(n){n.preventDefault(),i(a.settings.input).blur();var t=a.settings.input.val(),t=parseFloat(t)+parseFloat(a.settings.step);(t=zc.round(t,3))>=a.settings.min&&t<=a.settings.max&&a.settings.ifIncCallback.call(this,t),e=setTimeout(function(){l=setInterval(function(){t=parseFloat(t)+parseFloat(a.settings.step),(t=zc.round(t,3))>=a.settings.min&&t<=a.settings.max&&a.settings.ifIncCallback.call(this,t)},75)},500)}).on("mouseup",function(){clearTimeout(e),clearInterval(l)})},buttonDec:function(){var a=this,e=null,l=null;a.settings.buttonDec.on("mousedown",function(n){n.preventDefault(),i(a.settings.input).blur();var t=a.settings.input.val(),t=parseFloat(t)-parseFloat(a.settings.step);(t=zc.round(t,3))>=a.settings.min&&t<=a.settings.max&&a.settings.ifDecCallback.call(this,t),e=setTimeout(function(){l=setInterval(function(){t=parseFloat(t)-parseFloat(a.settings.step),(t=zc.round(t,3))>=a.settings.min&&t<=a.settings.max&&a.settings.ifDecCallback.call(this,t)},75)},500)}).on("mouseup",function(){clearTimeout(e),clearInterval(l)})}};t.addSettings(n),t.manualInput(),t.manualScroll(),t.buttonInc(),t.buttonDec()},inputRange:function(n,t){zc.inputRange(t,{el:n,settings:n.data("settings"),containerLBClass:c.containerLBClass,leftIndicatorClass:c.leftIndicatorClass,currentIndicatorClass:c.currentIndicatorClass,rightIndicatorClass:c.rightIndicatorClass})},initManualRange:function(t){var n=t.data("settings"),a=zc.strReplace(["{MIN}","{MAX}"],[void 0,void 0],s["title-range-error"]),e=t.parent().parent().find(".zc-panel-control-range__manual-range"),l=n.min||0,i=n.max||0,n=n.step||1;c.inputNumber({input:e.find(".zc-panel-control-range__manual-range_type_text"),buttonInc:e.find(".zc-panel-control-range__manual-range-spinner-button_inc"),buttonDec:e.find(".zc-panel-control-range__manual-range-spinner-button_dec"),min:l,max:i,step:n,ifIncCallback:function(n){e.find(".zc-panel-control-range__manual-range_type_text").removeClass("zc-panel-control-range__manual-range_bad-value"),e.find(".zc-panel-control-range__manual-range_type_text").attr("title",""),e.find(".zc-panel-control-range__manual-range_type_text").val(n).change(),t.val(n).change(),c.inputRange(t,"live"),r.enableSaveButton()},ifDecCallback:function(n){e.find(".zc-panel-control-range__manual-range_type_text").removeClass("zc-panel-control-range__manual-range_bad-value"),e.find(".zc-panel-control-range__manual-range_type_text").attr("title",""),e.find(".zc-panel-control-range__manual-range_type_text").val(n).change(),t.val(n).change(),c.inputRange(t,"live"),r.enableSaveButton()},ifChangeCallback:function(n){e.find(".zc-panel-control-range__manual-range_type_text").removeClass("zc-panel-control-range__manual-range_bad-value"),e.find(".zc-panel-control-range__manual-range_type_text").attr("title",""),t.val(n).change(),c.inputRange(t,"live"),r.enableSaveButton()},ifErrorCallback:function(n){e.find(".zc-panel-control-range__manual-range_type_text").addClass("zc-panel-control-range__manual-range_bad-value"),e.find(".zc-panel-control-range__manual-range_type_text").attr("title",a),r.disableSaveButton()}})}},a=new IntersectionObserver(function(n,t){n.forEach(function(n){0<n.intersectionRatio&&(i(n.target).hasClass("zc-panel-control-range__input_activated")||(i(n.target).addClass("zc-panel-control-range__input_activated"),c.inputRange(i(n.target),"init"),c.initManualRange(i(n.target))))})},{root:null,threshold:.25});i(window).on("zc/panel/menu/item-change-ICP",function(n,t){t&&t.find(".zc-panel-control-range__input").each(function(n,t){a.observe(t)})}),i(".zc-panel").on("input",".zc-panel-control-range__input",function(n){n.preventDefault(),c.inputRange(i(this),"live");n=i(this).parent().parent().find(".zc-panel-control-range__manual-range");n.find(".zc-panel-control-range__manual-range_type_text").val(i(this).val()).change(),n.find(".zc-panel-control-range__manual-range_type_text").removeClass("zc-panel-control-range__manual-range_bad-value"),r.enableSaveButton()})});