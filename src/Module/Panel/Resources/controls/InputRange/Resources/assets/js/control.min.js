(()=>{"use strict";zc.module.panel.addControl(((n,t,a)=>{const e={containerLBClass:"zc-panel-control-range__container_lb",leftIndicatorClass:"zc-panel-control-range__indicator_left",currentIndicatorClass:"zc-panel-control-range__indicator_current",rightIndicatorClass:"zc-panel-control-range__indicator_right"};e.inputNumber=t=>{const a={settings:{input:!1,buttonInc:!1,buttonDec:!1,min:1,max:100,step:1,ifIncCallback:()=>{},ifDecCallback:()=>{},ifChangeCallback:()=>{},ifErrorCallback:()=>{}},addSettings:function(n){return this.settings=n,this},manualInput:function(){const t=this;t.settings.input.on("input",(function(a){a.preventDefault();let e=n(this).val(),l="";l=isNaN(t.settings.step)||-1==t.settings.step.toString().indexOf(".")?/^\d+$/:/^-?\d*(\.\d+)?$/,e.match(l)&&e>=t.settings.min&&e<=t.settings.max?t.settings.ifChangeCallback(e):t.settings.ifErrorCallback(e)}))},manualScroll:function(){const t=this;t.settings.input.on("wheel",(function(a){if(n(this).is(":focus")){a.preventDefault();var e=t.settings.input.val();a.originalEvent.deltaY<0?(e=parseFloat(e)+parseFloat(t.settings.step),(e=zc.round(e,3))>=t.settings.min&&e<=t.settings.max&&t.settings.ifIncCallback(e)):(e=parseFloat(e)-parseFloat(t.settings.step),(e=zc.round(e,3))>=t.settings.min&&e<=t.settings.max&&t.settings.ifDecCallback(e))}}))},buttonInc:function(){const t=this;let a=null,e=null;t.settings.buttonInc.on("mousedown",(l=>{l.preventDefault(),n(t.settings.input).blur();let i=t.settings.input.val();i=parseFloat(i)+parseFloat(t.settings.step),i=zc.round(i,3),i>=t.settings.min&&i<=t.settings.max&&t.settings.ifIncCallback(i),a=setTimeout((()=>{e=setInterval((()=>{i=parseFloat(i)+parseFloat(t.settings.step),i=zc.round(i,3),i>=t.settings.min&&i<=t.settings.max&&t.settings.ifIncCallback(i)}),75)}),500)})).on("mouseup",(()=>{clearTimeout(a),clearInterval(e)}))},buttonDec:function(){const t=this;let a=null,e=null;t.settings.buttonDec.on("mousedown",(l=>{l.preventDefault(),n(t.settings.input).blur();let i=t.settings.input.val();i=parseFloat(i)-parseFloat(t.settings.step),i=zc.round(i,3),i>=t.settings.min&&i<=t.settings.max&&t.settings.ifDecCallback(i),a=setTimeout((()=>{e=setInterval((()=>{i=parseFloat(i)-parseFloat(t.settings.step),i=zc.round(i,3),i>=t.settings.min&&i<=t.settings.max&&t.settings.ifDecCallback(i)}),75)}),500)})).on("mouseup",(()=>{clearTimeout(a),clearInterval(e)}))}};a.addSettings(t),a.manualInput(),a.manualScroll(),a.buttonInc(),a.buttonDec()},e.inputRange=(n,t)=>{zc.inputRange(t,{el:n,settings:n.data("settings"),containerLBClass:e.containerLBClass,leftIndicatorClass:e.leftIndicatorClass,currentIndicatorClass:e.currentIndicatorClass,rightIndicatorClass:e.rightIndicatorClass})},e.initManualRange=n=>{let l=n.data("settings"),i=n.parent().parent().find(".zc-panel-control-range__manual-range"),r=l.min||0,s=l.max||0,o=l.step||1,c=zc.strReplace(["{MIN}","{MAX}"],[r,s],a["title-range-error"]);e.inputNumber({input:i.find(".zc-panel-control-range__manual-range_type_text"),buttonInc:i.find(".zc-panel-control-range__manual-range-spinner-button_inc"),buttonDec:i.find(".zc-panel-control-range__manual-range-spinner-button_dec"),min:r,max:s,step:o,ifIncCallback:a=>{i.find(".zc-panel-control-range__manual-range_type_text").removeClass("zc-panel-control-range__manual-range_bad-value"),i.find(".zc-panel-control-range__manual-range_type_text").attr("title",""),i.find(".zc-panel-control-range__manual-range_type_text").val(a).change(),n.val(a).change(),e.inputRange(n,"live"),t.enableSaveButton()},ifDecCallback:a=>{i.find(".zc-panel-control-range__manual-range_type_text").removeClass("zc-panel-control-range__manual-range_bad-value"),i.find(".zc-panel-control-range__manual-range_type_text").attr("title",""),i.find(".zc-panel-control-range__manual-range_type_text").val(a).change(),n.val(a).change(),e.inputRange(n,"live"),t.enableSaveButton()},ifChangeCallback:a=>{i.find(".zc-panel-control-range__manual-range_type_text").removeClass("zc-panel-control-range__manual-range_bad-value"),i.find(".zc-panel-control-range__manual-range_type_text").attr("title",""),n.val(a).change(),e.inputRange(n,"live"),t.enableSaveButton()},ifErrorCallback:n=>{i.find(".zc-panel-control-range__manual-range_type_text").addClass("zc-panel-control-range__manual-range_bad-value"),i.find(".zc-panel-control-range__manual-range_type_text").attr("title",c),t.disableSaveButton()}})};const l=new IntersectionObserver(((t,a)=>{t.forEach((t=>{t.intersectionRatio>0&&(n(t.target).hasClass("zc-panel-control-range__input_activated")||(n(t.target).addClass("zc-panel-control-range__input_activated"),e.inputRange(n(t.target),"init"),e.initManualRange(n(t.target))))}))}),{root:null,threshold:.25});n(window).on("zc/panel/menu/item-change-ICP",((n,t)=>{t&&t.find(".zc-panel-control-range__input").each(((n,t)=>{l.observe(t)}))})),n(".zc-panel").on("input",".zc-panel-control-range__input",(function(a){a.preventDefault(),e.inputRange(n(this),"live");var l=n(this).parent().parent().find(".zc-panel-control-range__manual-range");l.find(".zc-panel-control-range__manual-range_type_text").val(n(this).val()).change(),l.find(".zc-panel-control-range__manual-range_type_text").removeClass("zc-panel-control-range__manual-range_bad-value"),t.enableSaveButton()}))}))})();